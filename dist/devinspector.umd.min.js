!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).DevInspector={})}(this,function(e){"use strict";class t{constructor(){this.data={network:[],console:[],performance:{fps:0,memory:null},errors:[]},this.isRecording=!0,this.widget=null,this.panel=null,this.isVisible=!1,this.isMinimized=!1,this.activeTab="network",this.selectedRequest=null,this.init()}init(){this.createFloatingButton(),this.createMainPanel(),this.setupInterceptors(),this.setupEventListeners()}createFloatingButton(){this.widget=document.createElement("div"),this.widget.innerHTML="ðŸ”",this.widget.style.cssText="\n      position: fixed;\n      bottom: 24px;\n      right: 24px;\n      width: 56px;\n      height: 56px;\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      z-index: 999999;\n      color: white;\n      font-size: 24px;\n      box-shadow: 0 8px 32px rgba(102, 126, 234, 0.4);\n      transition: all 0.3s ease;\n    ",this.widget.addEventListener("click",()=>this.toggle()),this.widget.addEventListener("mouseenter",()=>{this.widget.style.transform="scale(1.1)"}),this.widget.addEventListener("mouseleave",()=>{this.widget.style.transform="scale(1)"}),document.body.appendChild(this.widget)}createMainPanel(){this.panel=document.createElement("div"),this.panel.style.cssText="\n      position: fixed;\n      bottom: 24px;\n      right: 24px;\n      width: 480px;\n      height: 650px;\n      background: #1a1a1a;\n      border: 1px solid #333;\n      border-radius: 12px;\n      display: none;\n      flex-direction: column;\n      z-index: 999998;\n      box-shadow: 0 24px 64px rgba(0, 0, 0, 0.8);\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      font-size: 13px;\n      color: #e4e4e7;\n      overflow: hidden;\n    ",this.renderPanel(),document.body.appendChild(this.panel)}renderPanel(){this.panel&&(this.panel.innerHTML=`\n      <div style="\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 12px 16px;\n        background: linear-gradient(135deg, #2a2a2a 0%, #1e1e1e 100%);\n        border-bottom: 1px solid #333;\n      ">\n        <div style="display: flex; align-items: center; gap: 8px;">\n          <div style="\n            width: 8px;\n            height: 8px;\n            background: ${this.isRecording?"#ef4444":"#6b7280"};\n            border-radius: 50%;\n          "></div>\n          <span style="font-weight: 600; font-size: 14px;">DevInspector v1.1.0</span>\n        </div>\n        <div style="display: flex; gap: 4px;">\n          <button class="minimize-btn" style="\n            padding: 6px; background: none; border: none; color: #9ca3af; cursor: pointer;\n            border-radius: 4px;\n          ">âˆ’</button>\n          <button class="close-btn" style="\n            padding: 6px; background: none; border: none; color: #9ca3af; cursor: pointer;\n            border-radius: 4px;\n          ">Ã—</button>\n        </div>\n      </div>\n\n      ${this.isMinimized?"":`\n        <div style="display: flex; background: #262626; border-bottom: 1px solid #333;">\n          ${this.renderTabs()}\n        </div>\n        <div style="flex: 1; overflow: hidden;">\n          ${this.renderTabContent()}\n        </div>\n      `}\n    `,this.attachEventListeners())}renderTabs(){return[{id:"network",label:"Network",count:this.data.network.length},{id:"console",label:"Console",count:this.data.console.length},{id:"performance",label:"Performance"},{id:"errors",label:"Errors",count:this.data.errors.length}].map(e=>`\n      <button data-tab="${e.id}" style="\n        padding: 12px 16px;\n        background: ${this.activeTab===e.id?"#1a1a1a":"transparent"};\n        border: none;\n        color: ${this.activeTab===e.id?"#3b82f6":"#9ca3af"};\n        cursor: pointer;\n        border-bottom: 2px solid ${this.activeTab===e.id?"#3b82f6":"transparent"};\n      ">\n        ${e.label}\n        ${void 0!==e.count?`<span style="\n          background: #374151; color: white; padding: 2px 6px; border-radius: 10px; \n          font-size: 11px; margin-left: 6px;\n        ">${e.count}</span>`:""}\n      </button>\n    `).join("")}renderTabContent(){switch(this.activeTab){case"network":return this.renderNetworkTab();case"console":return this.renderConsoleTab();case"performance":return this.renderPerformanceTab();case"errors":return this.renderErrorsTab();default:return""}}renderNetworkTab(){return`\n      <div style="display: flex; flex-direction: column; height: 100%;">\n        <div style="padding: 12px; border-bottom: 1px solid #333; background: #1e1e1e;">\n          <button class="clear-network" style="\n            padding: 6px 12px; background: #374151; border: none; color: white;\n            cursor: pointer; border-radius: 6px; margin-right: 8px;\n          ">Clear</button>\n          <button class="toggle-recording" style="\n            padding: 6px 12px; border: none; color: white; cursor: pointer; border-radius: 6px;\n            background: ${this.isRecording?"#ef4444":"#22c55e"};\n          ">${this.isRecording?"Pause":"Resume"}</button>\n          <span style="float: right; color: #6b7280; font-size: 12px; line-height: 32px;">\n            ${this.data.network.length} requests\n          </span>\n        </div>\n        <div style="flex: 1; overflow-y: auto;">\n          ${0===this.data.network.length?'\n            <div style="display: flex; align-items: center; justify-content: center; height: 200px; color: #6b7280;">\n              No network activity\n            </div>\n          ':this.data.network.map(e=>this.renderNetworkRequest(e)).join("")}\n        </div>\n        ${this.selectedRequest?this.renderRequestDetails():""}\n      </div>\n    `}renderNetworkRequest(e){var t;const n=this.getStatusColor(e.status),s=this.getMethodColor(e.method);return`\n      <div class="network-request" data-id="${e.id}" style="\n        padding: 12px 16px; border-bottom: 1px solid #2a2a2a; cursor: pointer;\n        ${(null===(t=this.selectedRequest)||void 0===t?void 0:t.id)===e.id?"background: #1e3a8a;":""}\n      ">\n        <div style="display: flex; justify-content: space-between; margin-bottom: 6px;">\n          <div style="display: flex; gap: 8px;">\n            <span style="\n              background: ${s}; color: white; padding: 2px 6px; border-radius: 4px;\n              font-size: 11px; font-weight: 600;\n            ">${e.method}</span>\n            <span style="color: ${n}; font-weight: 600;">${e.status}</span>\n            <span style="color: #6b7280;">${e.duration||"-"}ms</span>\n          </div>\n          <span style="color: #6b7280; font-size: 11px;">\n            ${e.timestamp.toLocaleTimeString()}\n          </span>\n        </div>\n        <div style="color: #d1d5db; font-size: 12px; word-break: break-all;">\n          ${e.url}\n        </div>\n      </div>\n    `}renderConsoleTab(){return`\n      <div style="display: flex; flex-direction: column; height: 100%;">\n        <div style="padding: 12px; border-bottom: 1px solid #333; background: #1e1e1e;">\n          <button class="clear-console" style="\n            padding: 6px 12px; background: #374151; border: none; color: white;\n            cursor: pointer; border-radius: 6px;\n          ">Clear</button>\n          <span style="float: right; color: #6b7280; font-size: 12px; line-height: 32px;">\n            ${this.data.console.length} logs\n          </span>\n        </div>\n        <div style="flex: 1; overflow-y: auto; font-family: monospace;">\n          ${0===this.data.console.length?'\n            <div style="display: flex; align-items: center; justify-content: center; height: 200px; color: #6b7280;">\n              No console logs\n            </div>\n          ':this.data.console.map(e=>`\n            <div style="padding: 8px 16px; border-bottom: 1px solid #2a2a2a; font-size: 12px;">\n              <span style="color: ${this.getConsoleLevelColor(e.level)}; text-transform: uppercase; font-weight: 600;">\n                [${e.level}]\n              </span>\n              <span style="color: #6b7280; margin: 0 8px;">${e.timestamp.toLocaleTimeString()}</span>\n              <span style="color: ${this.getConsoleLevelColor(e.level)};">${e.message}</span>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    `}renderPerformanceTab(){return`\n      <div style="padding: 20px;">\n        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px;">\n          <div style="\n            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);\n            border-radius: 12px; padding: 20px; text-align: center;\n          ">\n            <div style="font-size: 32px; font-weight: 700; color: #60a5fa;">${this.data.performance.fps}</div>\n            <div style="font-size: 12px; color: #bfdbfe; margin-top: 4px;">FPS</div>\n          </div>\n          <div style="\n            background: linear-gradient(135deg, #166534 0%, #16a34a 100%);\n            border-radius: 12px; padding: 20px; text-align: center;\n          ">\n            <div style="font-size: 32px; font-weight: 700; color: #4ade80;">\n              ${this.data.performance.memory?this.data.performance.memory.used+" MB":"N/A"}\n            </div>\n            <div style="font-size: 12px; color: #bbf7d0; margin-top: 4px;">Memory</div>\n          </div>\n        </div>\n        <div style="background: #262626; border-radius: 12px; padding: 20px;">\n          <h4 style="margin: 0 0 16px 0;">Performance Metrics</h4>\n          <div style="color: #9ca3af;">\n            Performance monitoring active...\n          </div>\n        </div>\n      </div>\n    `}renderErrorsTab(){return`\n      <div style="display: flex; flex-direction: column; height: 100%;">\n        <div style="padding: 12px; border-bottom: 1px solid #333; background: #1e1e1e;">\n          <button class="clear-errors" style="\n            padding: 6px 12px; background: #374151; border: none; color: white;\n            cursor: pointer; border-radius: 6px;\n          ">Clear</button>\n          <span style="float: right; color: #6b7280; font-size: 12px; line-height: 32px;">\n            ${this.data.errors.length} errors\n          </span>\n        </div>\n        <div style="flex: 1; overflow-y: auto;">\n          ${0===this.data.errors.length?'\n            <div style="display: flex; align-items: center; justify-content: center; height: 200px; color: #6b7280;">\n              No errors recorded\n            </div>\n          ':this.data.errors.map(e=>`\n            <div style="padding: 16px; border-bottom: 1px solid #2a2a2a;">\n              <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">\n                <span style="color: #ef4444; font-weight: 600;">${e.type}</span>\n                <span style="color: #6b7280; font-size: 11px;">${e.timestamp.toLocaleTimeString()}</span>\n              </div>\n              <div style="color: #fca5a5; margin-bottom: 8px;">${e.message}</div>\n              ${e.stack?`<pre style="\n                background: #0f0f0f; padding: 8px; border-radius: 4px; font-size: 11px;\n                color: #9ca3af; overflow-x: auto; white-space: pre-wrap;\n              ">${e.stack}</pre>`:""}\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    `}renderRequestDetails(){return this.selectedRequest?`\n      <div style="border-top: 1px solid #333; height: 200px; overflow-y: auto; background: #1e1e1e;">\n        <div style="padding: 12px; border-bottom: 1px solid #333; display: flex; justify-content: space-between;">\n          <h4 style="margin: 0;">Request Details</h4>\n          <button class="close-details" style="background: none; border: none; color: #6b7280; cursor: pointer;">Ã—</button>\n        </div>\n        <div style="padding: 16px; font-size: 12px;">\n          <div style="margin-bottom: 12px;">\n            <strong>URL:</strong> ${this.selectedRequest.url}\n          </div>\n          <div style="margin-bottom: 12px;">\n            <strong>Method:</strong> ${this.selectedRequest.method}\n          </div>\n          <div style="margin-bottom: 12px;">\n            <strong>Status:</strong> ${this.selectedRequest.status}\n          </div>\n          <div>\n            <strong>Duration:</strong> ${this.selectedRequest.duration||"-"}ms\n          </div>\n        </div>\n      </div>\n    `:""}getStatusColor(e){if("error"===e||"pending"===e)return"#6b7280";const t="string"==typeof e?parseInt(e):e;return t>=200&&t<300?"#22c55e":t>=300&&t<400?"#f59e0b":t>=400?"#ef4444":"#6b7280"}getMethodColor(e){return{GET:"#22c55e",POST:"#3b82f6",PUT:"#f59e0b",DELETE:"#ef4444",PATCH:"#8b5cf6"}[e]||"#6b7280"}getConsoleLevelColor(e){return{log:"#d1d5db",info:"#60a5fa",warn:"#fbbf24",error:"#f87171",debug:"#a78bfa"}[e]||"#d1d5db"}attachEventListeners(){var e,t,n,s,r;if(!this.panel)return;const i=this.panel.querySelector(".minimize-btn"),o=this.panel.querySelector(".close-btn");null==i||i.addEventListener("click",()=>this.minimize()),null==o||o.addEventListener("click",()=>this.hide()),this.panel.querySelectorAll("[data-tab]").forEach(e=>{e.addEventListener("click",e=>{this.activeTab=e.target.getAttribute("data-tab"),this.renderPanel()})}),null===(e=this.panel.querySelector(".clear-network"))||void 0===e||e.addEventListener("click",()=>this.clear("network")),null===(t=this.panel.querySelector(".toggle-recording"))||void 0===t||t.addEventListener("click",()=>this.toggleRecording()),null===(n=this.panel.querySelector(".clear-console"))||void 0===n||n.addEventListener("click",()=>this.clear("console")),null===(s=this.panel.querySelector(".clear-errors"))||void 0===s||s.addEventListener("click",()=>this.clear("errors")),null===(r=this.panel.querySelector(".close-details"))||void 0===r||r.addEventListener("click",()=>{this.selectedRequest=null,this.renderPanel()}),this.panel.querySelectorAll(".network-request").forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget.getAttribute("data-id");this.selectedRequest=this.data.network.find(e=>e.id===t)||null,this.renderPanel()})})}setupEventListeners(){document.addEventListener("keydown",e=>{e.ctrlKey&&e.shiftKey&&"D"===e.key&&(e.preventDefault(),this.toggle())})}setupInterceptors(){this.interceptFetch(),this.interceptXHR(),this.interceptConsole(),this.interceptErrors(),this.setupPerformanceMonitoring()}interceptFetch(){const e=window.fetch;window.fetch=async(t,n)=>{if(!this.isRecording)return e(t,n);const s=Math.random().toString(36).substr(2,9),r=performance.now(),i="string"==typeof t?t:t.toString(),o={id:s,url:i,method:(n||{}).method||"GET",status:"pending",timestamp:new Date};this.data.network.unshift(o),this.renderPanel();try{const i=await e(t,n),a=performance.now(),c=this.data.network.findIndex(e=>e.id===s);return-1!==c&&(this.data.network[c]={...o,status:i.status,duration:Math.round(a-r)},this.renderPanel()),i}catch(e){const t=performance.now(),n=this.data.network.findIndex(e=>e.id===s);throw-1!==n&&(this.data.network[n]={...o,status:"error",error:e.message,duration:Math.round(t-r)},this.renderPanel()),e}}}interceptXHR(){const e=window.XMLHttpRequest,t=this;window.XMLHttpRequest=function(){const n=new e,s=Math.random().toString(36).substr(2,9);let r;const i=n.open,o=n.send;return n.open=function(e,n,...r){if(t.isRecording){const r={id:s,url:n,method:e,status:"pending",timestamp:new Date};t.data.network.unshift(r),t.renderPanel()}return i.apply(this,[e,n,...r])},n.send=function(...e){return t.isRecording&&(r=performance.now(),n.addEventListener("loadend",()=>{const e=performance.now(),i=t.data.network.findIndex(e=>e.id===s);-1!==i&&(t.data.network[i]={...t.data.network[i],status:n.status,duration:Math.round(e-r)},t.renderPanel())})),o.apply(this,e)},n}}interceptConsole(){["log","warn","error","info","debug"].forEach(e=>{const t=console[e];console[e]=(...n)=>{if(this.isRecording){const t={id:Math.random().toString(36).substr(2,9),level:e,message:n.map(e=>{if("object"==typeof e)try{return JSON.stringify(e,null,2)}catch(t){return String(e)}return String(e)}).join(" "),timestamp:new Date};this.data.console.unshift(t),this.data.console.length>500&&(this.data.console=this.data.console.slice(0,500)),this.renderPanel()}t.apply(console,n)}})}interceptErrors(){window.addEventListener("error",e=>{var t;if(!this.isRecording)return;const n={id:Math.random().toString(36).substr(2,9),type:"JavaScript Error",message:e.message,timestamp:new Date,stack:null===(t=e.error)||void 0===t?void 0:t.stack};this.data.errors.unshift(n),this.renderPanel()}),window.addEventListener("unhandledrejection",e=>{var t;if(!this.isRecording)return;const n={id:Math.random().toString(36).substr(2,9),type:"Promise Rejection",message:(null===(t=e.reason)||void 0===t?void 0:t.message)||String(e.reason),timestamp:new Date};this.data.errors.unshift(n),this.renderPanel()})}setupPerformanceMonitoring(){let e=performance.now(),t=0;const n=()=>{t++;const s=performance.now();if(s>=e+1e3){if(this.data.performance.fps=Math.round(1e3*t/(s-e)),t=0,e=s,performance.memory){const e=performance.memory;this.data.performance.memory={used:Math.round(e.usedJSHeapSize/1048576),total:Math.round(e.totalJSHeapSize/1048576),limit:Math.round(e.jsHeapSizeLimit/1048576)}}this.isVisible&&"performance"===this.activeTab&&this.renderPanel()}requestAnimationFrame(n)};n()}show(){this.panel&&(this.panel.style.display="flex",this.isVisible=!0,this.widget&&(this.widget.style.display="none"))}hide(){this.panel&&(this.panel.style.display="none",this.isVisible=!1,this.widget&&(this.widget.style.display="flex"))}toggle(){this.isVisible?this.hide():this.show()}minimize(){this.isMinimized=!this.isMinimized,this.panel&&(this.panel.style.height=this.isMinimized?"60px":"650px",this.renderPanel())}clear(e){"network"===e?(this.data.network=[],this.selectedRequest=null):"console"===e?this.data.console=[]:"errors"===e&&(this.data.errors=[]),this.renderPanel()}toggleRecording(){this.isRecording=!this.isRecording,this.renderPanel()}destroy(){this.widget&&this.widget.parentNode&&this.widget.parentNode.removeChild(this.widget),this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel)}}"undefined"!=typeof window&&(window.EnhancedDevInspector=t);class n{constructor(e={}){var t,n;this.events=new Map,this.maxListeners=null!==(t=e.maxListeners)&&void 0!==t?t:10,this.captureRejections=null!==(n=e.captureRejections)&&void 0!==n&&n}on(e,t){this.events.has(e)||this.events.set(e,new Set);const n=this.events.get(e);return n.size>=this.maxListeners&&console.warn(`MaxListenersExceededWarning: Possible EventEmitter memory leak detected. ${n.size} ${String(e)} listeners added.`),n.add(t),()=>{n.delete(t),0===n.size&&this.events.delete(e)}}once(e,t){const n=this.on(e,e=>{n(),t(e)});return n}emit(e,...t){const n=this.events.get(e);if(!n||0===n.size)return!1;const s=t[0];return n.forEach(t=>{try{t(s)}catch(t){this.captureRejections?this.emit("error",t):console.error(`Error in event listener for "${String(e)}":`,t)}}),!0}off(e,t){if(!t)return void this.events.delete(e);const n=this.events.get(e);n&&(n.delete(t),0===n.size&&this.events.delete(e))}removeAllListeners(e){e?this.events.delete(e):this.events.clear()}listenerCount(e){const t=this.events.get(e);return t?t.size:0}eventNames(){return Array.from(this.events.keys())}setMaxListeners(e){this.maxListeners=e}getMaxListeners(){return this.maxListeners}}class s{constructor(e){this.head=0,this.tail=0,this.size=0,this.idCounter=0,this.maxSize=e.maxSize,this.ttl=e.ttl,this.onEvict=e.onEvict,this.buffer=new Array(this.maxSize)}push(e){const t=`${Date.now()}-${++this.idCounter}`,n={id:t,timestamp:Date.now(),data:e};if(this.size===this.maxSize){const e=this.buffer[this.tail];e&&this.onEvict&&this.onEvict(e),this.tail=(this.tail+1)%this.maxSize}else this.size++;return this.buffer[this.head]=n,this.head=(this.head+1)%this.maxSize,t}get(e){const t=this.findEntry(e);if(t&&!this.isExpired(t))return t.data}getAll(){return this.getAllEntries().map(e=>e.data)}getAllEntries(){const e=[],t=Date.now();for(let n=0;n<this.size;n++){const s=this.buffer[(this.tail+n)%this.maxSize];s&&!this.isExpired(s,t)&&e.push(s)}return e}find(e){const t=this.getAllEntries();for(const n of t)if(e(n.data))return n.data}filter(e){return this.getAllEntries().filter(t=>e(t.data)).map(e=>e.data)}clear(){this.buffer=new Array(this.maxSize),this.head=0,this.tail=0,this.size=0}getSize(){return this.size}isFull(){return this.size===this.maxSize}findEntry(e){for(let t=0;t<this.size;t++){const n=this.buffer[(this.tail+t)%this.maxSize];if(n&&n.id===e)return n}}isExpired(e,t=Date.now()){return!!this.ttl&&t-e.timestamp>this.ttl}removeExpired(){if(!this.ttl)return 0;const e=Date.now();let t=0;const n=[];for(let s=0;s<this.size;s++){const r=this.buffer[(this.tail+s)%this.maxSize];r&&!this.isExpired(r,e)?n.push(r):r&&this.onEvict&&(this.onEvict(r),t++)}return this.buffer=new Array(this.maxSize),this.size=n.length,this.tail=0,this.head=this.size,n.forEach((e,t)=>{this.buffer[t]=e}),t}}class r{constructor(e){this.storage=new Map,this.accessOrder=[],this.maxSize=e.maxSize,this.ttl=e.ttl,this.onEvict=e.onEvict}set(e,t){const n={id:e,timestamp:Date.now(),data:t};if(this.storage.has(e))this.accessOrder=this.accessOrder.filter(t=>t!==e);else if(this.storage.size>=this.maxSize){const e=this.accessOrder.shift();if(e){const t=this.storage.get(e);t&&this.onEvict&&this.onEvict(t),this.storage.delete(e)}}this.storage.set(e,n),this.accessOrder.push(e)}get(e){const t=this.storage.get(e);if(t&&!this.isExpired(t))return this.updateAccessOrder(e),t.data;t&&this.delete(e)}has(e){const t=this.storage.get(e);return!(!t||this.isExpired(t))||(t&&this.delete(e),!1)}delete(e){const t=this.storage.get(e);return!!t&&(this.onEvict&&this.onEvict(t),this.storage.delete(e),this.accessOrder=this.accessOrder.filter(t=>t!==e),!0)}clear(){this.onEvict&&this.storage.forEach(e=>this.onEvict(e)),this.storage.clear(),this.accessOrder=[]}getSize(){return this.storage.size}getAllKeys(){return Array.from(this.storage.keys())}getAllValues(){return Array.from(this.storage.values()).filter(e=>!this.isExpired(e)).map(e=>e.data)}updateAccessOrder(e){this.accessOrder=this.accessOrder.filter(t=>t!==e),this.accessOrder.push(e)}isExpired(e){return!!this.ttl&&Date.now()-e.timestamp>this.ttl}removeExpired(){let e=0;const t=[];return this.storage.forEach((e,n)=>{this.isExpired(e)&&t.push(n)}),t.forEach(t=>{this.delete(t)&&e++}),e}}class i{constructor(e){this.plugins=new Map,this.activePlugins=new Set,this.installingPlugins=new Set,this.context=e}async register(e){if(this.plugins.has(e.name))throw new Error(`Plugin "${e.name}" is already registered`);if(this.installingPlugins.has(e.name))throw new Error(`Plugin "${e.name}" is currently being installed`);this.installingPlugins.add(e.name);try{await e.install(this.context),this.plugins.set(e.name,e),this.activePlugins.add(e.name),e.enable&&e.enable(),this.context.events.emit("plugin:registered",{name:e.name,version:e.version})}catch(t){throw this.installingPlugins.delete(e.name),new Error(`Failed to install plugin "${e.name}": ${t}`)}this.installingPlugins.delete(e.name)}async unregister(e){const t=this.plugins.get(e);if(!t)throw new Error(`Plugin "${e}" is not registered`);t.disable&&t.disable(),t.uninstall&&await t.uninstall(),this.plugins.delete(e),this.activePlugins.delete(e),this.context.events.emit("plugin:unregistered",{name:e})}enable(e){const t=this.plugins.get(e);if(!t)throw new Error(`Plugin "${e}" is not registered`);this.activePlugins.has(e)||(t.enable&&t.enable(),this.activePlugins.add(e),this.context.events.emit("plugin:enabled",{name:e}))}disable(e){const t=this.plugins.get(e);if(!t)throw new Error(`Plugin "${e}" is not registered`);this.activePlugins.has(e)&&(t.disable&&t.disable(),this.activePlugins.delete(e),this.context.events.emit("plugin:disabled",{name:e}))}get(e){return this.plugins.get(e)}has(e){return this.plugins.has(e)}isActive(e){return this.activePlugins.has(e)}getAll(){return Array.from(this.plugins.values())}getActive(){return Array.from(this.activePlugins).map(e=>this.plugins.get(e))}getMetadata(e){const t=this.plugins.get(e);if(t)return{name:t.name,version:t.version,description:t.description}}getAllMetadata(){return this.getAll().map(e=>({name:e.name,version:e.version,description:e.description}))}}class o{constructor(e={}){if(this.isVisible=!1,this.isMinimized=!1,this.monitors=new Map,this.ui=null,this.initialized=!1,this.cleanupFunctions=[],o.instance)return console.warn("DevInspector instance already exists. Returning existing instance."),o.instance;this.config=this.mergeConfig(e),this.events=new n({maxListeners:100}),this.networkStorage=new s({maxSize:this.config.maxNetworkEntries,onEvict:e=>this.events.emit("network:evict",e)}),this.consoleStorage=new s({maxSize:this.config.maxConsoleEntries,onEvict:e=>this.events.emit("console:evict",e)}),this.performanceStorage=new r({maxSize:1e3,ttl:36e5}),this.errorStorage=new s({maxSize:100,onEvict:e=>this.events.emit("error:evict",e)}),this.pluginSystem=new i({inspector:this,storage:{network:this.networkStorage,console:this.consoleStorage,performance:this.performanceStorage,error:this.errorStorage},events:this.events,config:this.config}),this.config.enabled&&this.init(),o.instance=this}mergeConfig(e){var t;const n={enabled:"undefined"!=typeof process&&"production"!==(null===(t=process.env)||void 0===t?void 0:t.NODE_ENV),position:"bottom-right",theme:"auto",hotkeys:{toggle:"ctrl+shift+d",minimize:"ctrl+shift+m"},features:{network:!0,console:!0,performance:!0,errors:!0,state:!0,dom:!0,storage:!0},plugins:[],maxNetworkEntries:1e3,maxConsoleEntries:500,captureStackTraces:!0,networkFilters:{hideAssets:!1,hideCached:!1},onError:()=>{},onPerformanceIssue:()=>{},workerUrl:void 0,remoteConfig:null};return{...n,...e,hotkeys:{...n.hotkeys,...e.hotkeys},features:{...n.features,...e.features},networkFilters:{...n.networkFilters,...e.networkFilters}}}async init(){if(!this.initialized)try{await this.loadMonitors(),await this.loadUI(),await this.registerPlugins(),this.setupHotkeys(),this.setupErrorHandlers(),this.initialized=!0,this.events.emit("inspector:ready")}catch(e){console.error("Failed to initialize DevInspector:",e),this.config.onError(e)}}async loadMonitors(){const e=this.config.features;if(e.network){const{NetworkMonitor:e}=await Promise.resolve().then(function(){return h}),t=new e(this);this.monitors.set("network",t),t.start()}if(e.console){const{ConsoleMonitor:e}=await Promise.resolve().then(function(){return m}),t=new e(this);this.monitors.set("console",t),t.start()}if(e.performance){const{PerformanceMonitor:e}=await Promise.resolve().then(function(){return y}),t=new e(this);this.monitors.set("performance",t),t.start()}if(e.errors){const{ErrorMonitor:e}=await Promise.resolve().then(function(){return k}),t=new e(this);this.monitors.set("error",t),t.start()}if(e.state){const{StateMonitor:e}=await Promise.resolve().then(function(){return E}),t=new e(this);this.monitors.set("state",t),t.start()}if(e.dom){const{DOMMonitor:e}=await Promise.resolve().then(function(){return S}),t=new e(this);this.monitors.set("dom",t),t.start()}if(e.storage){const{StorageMonitor:e}=await Promise.resolve().then(function(){return $}),t=new e(this);this.monitors.set("storage",t),t.start()}}async loadUI(){const{DevInspectorUI:e}=await Promise.resolve().then(function(){return L});this.ui=new e(this),await this.ui.init()}async registerPlugins(){for(const e of this.config.plugins)try{await this.pluginSystem.register(e)}catch(e){console.error("Failed to register plugin:",e)}}setupHotkeys(){const e=e=>{const{hotkeys:t}=this.config,n=this.getKeyCombo(e);n===t.toggle?(e.preventDefault(),this.toggle()):n===t.minimize&&(e.preventDefault(),this.minimize())};document.addEventListener("keydown",e),this.cleanupFunctions.push(()=>document.removeEventListener("keydown",e))}setupErrorHandlers(){if(!this.config.features.errors)return;const e=e=>{this.events.emit("error:uncaught",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,error:e.error,timestamp:Date.now()})},t=e=>{this.events.emit("error:uncaught",{message:"Unhandled promise rejection",reason:e.reason,promise:e.promise,timestamp:Date.now()})};window.addEventListener("error",e),window.addEventListener("unhandledrejection",t),this.cleanupFunctions.push(()=>{window.removeEventListener("error",e),window.removeEventListener("unhandledrejection",t)})}getKeyCombo(e){const t=[];return e.ctrlKey&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&t.push("shift"),e.metaKey&&t.push("meta"),t.push(e.key.toLowerCase()),t.join("+")}show(){var e;this.initialized?(this.isVisible=!0,this.isMinimized=!1,null===(e=this.ui)||void 0===e||e.show(),this.events.emit("inspector:show")):this.init().then(()=>this.show())}hide(){var e;this.isVisible=!1,null===(e=this.ui)||void 0===e||e.hide(),this.events.emit("inspector:hide")}minimize(){var e;this.isMinimized=!0,null===(e=this.ui)||void 0===e||e.minimize(),this.events.emit("inspector:minimize")}toggle(){this.isVisible&&!this.isMinimized?this.hide():this.show()}destroy(){var e;this.monitors.forEach(e=>{var t;return null===(t=e.stop)||void 0===t?void 0:t.call(e)}),this.monitors.clear(),null===(e=this.ui)||void 0===e||e.destroy(),this.ui=null,this.cleanupFunctions.forEach(e=>e()),this.cleanupFunctions=[],this.events.emit("inspector:destroy"),this.events.removeAllListeners(),o.instance=null}track(e,t){this.events.emit("performance:metric",{name:e,data:t,timestamp:Date.now()})}markStart(e){performance.mark(`devinspector-${e}-start`)}markEnd(e){performance.mark(`devinspector-${e}-end`);try{performance.measure(`devinspector-${e}`,`devinspector-${e}-start`,`devinspector-${e}-end`)}catch(t){console.warn(`Failed to measure ${e}:`,t)}}use(e){this.pluginSystem.register(e)}export(){return{version:"1.0.0",timestamp:Date.now(),config:this.config,data:{network:this.networkStorage.getAll(),console:this.consoleStorage.getAll(),performance:this.performanceStorage.getAllValues(),errors:this.errorStorage.getAll()}}}import(e){console.log("Import functionality not yet implemented",e)}on(e,t){return this.events.on(e,t)}off(e,t){this.events.off(e,t)}getEvents(){return this.events}getStorage(e){switch(e){case"network":return this.networkStorage;case"console":return this.consoleStorage;case"performance":return this.performanceStorage;case"error":return this.errorStorage}}getConfig(){return this.config}getPluginSystem(){return this.pluginSystem}getMonitor(e){return this.monitors.get(e)}static getInstance(){return o.instance}}function a(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}o.instance=null;class c{constructor(e={}){this.requestMap=new Map,this.originalFetch=window.fetch,this.handlers=e}install(){const e=this;window.fetch=async function(t,n){var s,r,i,o,c,l;const d=a(),h=performance.now();let p,u,m,g={};t instanceof Request?(p=t.url,u=t.method,t.headers.forEach((e,t)=>{g[t]=e}),m=await e.extractBody(t)):(p=t.toString(),u=(null==n?void 0:n.method)||"GET",(null==n?void 0:n.headers)&&(n.headers instanceof Headers?n.headers.forEach((e,t)=>{g[t]=e}):Array.isArray(n.headers)?n.headers.forEach(([e,t])=>{g[e]=t}):g=n.headers),m=null==n?void 0:n.body);const f={id:d,method:u,url:p,headers:g,body:e.sanitizeBody(m),timestamp:Date.now(),type:"fetch"};e.requestMap.set(d,f),null===(r=(s=e.handlers).onRequest)||void 0===r||r.call(s,f);try{const s=await e.originalFetch.apply(window,[t,n]),r=performance.now()-h,a={};s.headers.forEach((e,t)=>{a[t]=e});const c=s.clone(),l=await e.extractResponseBody(c),p=e.calculateSize(l,a),u={id:d,status:s.status,statusText:s.statusText,headers:a,body:l,size:p,duration:r,timestamp:Date.now(),fromCache:e.isFromCache(s,r)};return null===(o=(i=e.handlers).onResponse)||void 0===o||o.call(i,u),e.requestMap.delete(d),s}catch(t){const n={id:d,message:t.message||"Network request failed",stack:t.stack,timestamp:Date.now()};throw null===(l=(c=e.handlers).onError)||void 0===l||l.call(c,n),e.requestMap.delete(d),t}}}uninstall(){window.fetch=this.originalFetch,this.requestMap.clear()}async extractBody(e){try{const t=e.headers.get("content-type")||"";if(e.bodyUsed)return"[Body already read]";const n=e.clone();return t.includes("application/json")?await n.json():t.includes("text/")||t.includes("application/x-www-form-urlencoded")?await n.text():t.includes("multipart/form-data")?"[FormData]":"[Binary data]"}catch(e){return"[Unable to read body]"}}async extractResponseBody(e){try{const t=e.headers.get("content-type")||"";return t.includes("application/json")?await e.json():t.includes("text/")?await e.text():t.includes("image/")?"[Image data]":t.includes("video/")?"[Video data]":t.includes("audio/")?"[Audio data]":`[Binary data: ${(await e.blob()).size} bytes]`}catch(e){return"[Unable to read response]"}}sanitizeBody(e){if(e){if("string"==typeof e)return e.length>1e4?e.substring(0,1e4)+"...":e;if(e instanceof FormData){const t={};return e.forEach((e,n)=>{t[n]=e instanceof File?`[File: ${e.name}, ${e.size} bytes]`:e}),{type:"FormData",entries:t}}return e instanceof ArrayBuffer?`[ArrayBuffer: ${e.byteLength} bytes]`:e instanceof Blob?`[Blob: ${e.size} bytes, type: ${e.type}]`:e instanceof URLSearchParams?e.toString():e}}calculateSize(e,t){const n=t["content-length"];if(n)return parseInt(n,10);if("string"==typeof e)return new Blob([e]).size;if(e&&"object"==typeof e)try{return new Blob([JSON.stringify(e)]).size}catch(e){return 0}return 0}isFromCache(e,t){if(t<5)return!0;const n=e.headers.get("cache-control"),s=e.headers.get("etag"),r=e.headers.get("last-modified");return!!(n||s||r)}}class l{constructor(e={}){this.handlers=e,this.originalOpen=XMLHttpRequest.prototype.open,this.originalSend=XMLHttpRequest.prototype.send,this.originalSetRequestHeader=XMLHttpRequest.prototype.setRequestHeader}install(){const e=this;XMLHttpRequest.prototype.open=function(t,n,s=!0,r,i){return this._devinspectorId=a(),this._devinspectorMethod=t,this._devinspectorUrl=n.toString(),this._devinspectorRequestHeaders={},e.originalOpen.apply(this,[t,n,s,r,i])},XMLHttpRequest.prototype.setRequestHeader=function(t,n){return this._devinspectorRequestHeaders&&(this._devinspectorRequestHeaders[t]=n),e.originalSetRequestHeader.apply(this,[t,n])},XMLHttpRequest.prototype.send=function(t){var n,s;this._devinspectorStartTime=performance.now(),this._devinspectorRequestBody=e.sanitizeBody(t);const r={id:this._devinspectorId,method:this._devinspectorMethod,url:this._devinspectorUrl,headers:this._devinspectorRequestHeaders||{},body:this._devinspectorRequestBody,timestamp:Date.now(),type:"xhr"};return null===(s=(n=e.handlers).onRequest)||void 0===s||s.call(n,r),this.upload&&e.handlers.onProgress&&this.upload.addEventListener("progress",t=>{t.lengthComputable&&e.handlers.onProgress({id:this._devinspectorId,loaded:t.loaded,total:t.total})}),e.handlers.onProgress&&this.addEventListener("progress",t=>{t.lengthComputable&&e.handlers.onProgress({id:this._devinspectorId,loaded:t.loaded,total:t.total})}),this.addEventListener("load",function(){var t,n;const s=performance.now()-this._devinspectorStartTime,r=e.parseResponseHeaders(this.getAllResponseHeaders()),i=e.extractResponseBody(this),o=e.calculateSize(i,r),a={id:this._devinspectorId,status:this.status,statusText:this.statusText,headers:r,body:i,size:o,duration:s,timestamp:Date.now(),fromCache:s<5};null===(n=(t=e.handlers).onResponse)||void 0===n||n.call(t,a)}),this.addEventListener("error",function(){var t,n;const s={id:this._devinspectorId,message:"Network request failed",timestamp:Date.now()};null===(n=(t=e.handlers).onError)||void 0===n||n.call(t,s)}),this.addEventListener("timeout",function(){var t,n;const s={id:this._devinspectorId,message:`Request timeout after ${this.timeout}ms`,timestamp:Date.now()};null===(n=(t=e.handlers).onError)||void 0===n||n.call(t,s)}),this.addEventListener("abort",function(){var t,n;const s={id:this._devinspectorId,message:"Request aborted",timestamp:Date.now()};null===(n=(t=e.handlers).onError)||void 0===n||n.call(t,s)}),e.originalSend.apply(this,[t])}}uninstall(){XMLHttpRequest.prototype.open=this.originalOpen,XMLHttpRequest.prototype.send=this.originalSend,XMLHttpRequest.prototype.setRequestHeader=this.originalSetRequestHeader}sanitizeBody(e){if(e){if("string"==typeof e)return e.length>1e4?e.substring(0,1e4)+"...":e;if(e instanceof FormData){const t={};return e.forEach((e,n)=>{t[n]=e instanceof File?`[File: ${e.name}, ${e.size} bytes]`:e}),{type:"FormData",entries:t}}return e instanceof ArrayBuffer?`[ArrayBuffer: ${e.byteLength} bytes]`:e instanceof Blob?`[Blob: ${e.size} bytes, type: ${e.type}]`:e instanceof Document?"[Document]":e}}parseResponseHeaders(e){const t={};return e?(e.trim().split(/[\r\n]+/).forEach(e=>{const n=e.split(": "),s=n.shift();s&&(t[s]=n.join(": "))}),t):t}extractResponseBody(e){try{const t=e.getResponseHeader("content-type")||"";if("json"===e.responseType&&e.response)return e.response;if("arraybuffer"===e.responseType)return`[ArrayBuffer: ${e.response.byteLength} bytes]`;if("blob"===e.responseType)return`[Blob: ${e.response.size} bytes, type: ${e.response.type}]`;if("document"===e.responseType)return"[Document]";if(e.responseText){if(t.includes("application/json"))try{return JSON.parse(e.responseText)}catch(t){return e.responseText}return e.responseText.length>1e4?e.responseText.substring(0,1e4)+"...":e.responseText}return null}catch(e){return"[Unable to read response]"}}calculateSize(e,t){const n=t["content-length"];if(n)return parseInt(n,10);if("string"==typeof e)return new Blob([e]).size;if(e&&"object"==typeof e)try{return new Blob([JSON.stringify(e)]).size}catch(e){return 0}return 0}}class d{constructor(e={}){this.connections=new Map,this.originalWebSocket=window.WebSocket,this.handlers=e}install(){const e=this,t=this.originalWebSocket;window.WebSocket=function(n,s){var r,i;const o=new t(n,s),c=a();o._devinspectorId=c,o._devinspectorUrl=n.toString(),o._devinspectorProtocols=s;const l={id:c,url:n.toString(),protocols:s,timestamp:Date.now(),readyState:o.readyState,status:"connecting"};e.connections.set(c,l),null===(i=(r=e.handlers).onConnection)||void 0===i||i.call(r,l),o.addEventListener("open",function(){var t,n;const s=e.connections.get(c);s&&(s.status="open",s.readyState=this.readyState,null===(n=(t=e.handlers).onStatusChange)||void 0===n||n.call(t,{connectionId:c,status:"open"}))}),o.addEventListener("close",function(t){var n,s;const r=e.connections.get(c);r&&(r.status="closed",r.readyState=this.readyState,null===(s=(n=e.handlers).onStatusChange)||void 0===s||s.call(n,{connectionId:c,status:"closed"})),e.connections.delete(c)}),o.addEventListener("error",function(t){var n,s;const r={id:a(),connectionId:c,message:"WebSocket error occurred",timestamp:Date.now()};null===(s=(n=e.handlers).onError)||void 0===s||s.call(n,r)}),o.addEventListener("message",function(t){var n,s;const r={id:a(),connectionId:c,type:"received",data:e.parseMessageData(t.data),timestamp:Date.now(),size:e.calculateMessageSize(t.data)};null===(s=(n=e.handlers).onMessage)||void 0===s||s.call(n,r)});const d=o.send.bind(o);o.send=function(t){var n,s;const r={id:a(),connectionId:c,type:"sent",data:e.parseMessageData(t),timestamp:Date.now(),size:e.calculateMessageSize(t)};return null===(s=(n=e.handlers).onMessage)||void 0===s||s.call(n,r),d(t)};const h=o.close.bind(o);return o.close=function(t,n){var s,r;const i=e.connections.get(c);return i&&(i.status="closing",i.readyState=this.readyState,null===(r=(s=e.handlers).onStatusChange)||void 0===r||r.call(s,{connectionId:c,status:"closing"})),h(t,n)},o},Object.setPrototypeOf(window.WebSocket,t),Object.setPrototypeOf(window.WebSocket.prototype,t.prototype),window.WebSocket.CONNECTING=t.CONNECTING,window.WebSocket.OPEN=t.OPEN,window.WebSocket.CLOSING=t.CLOSING,window.WebSocket.CLOSED=t.CLOSED}uninstall(){window.WebSocket=this.originalWebSocket,this.connections.clear()}parseMessageData(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e.length>1e4?e.substring(0,1e4)+"...":e}return e instanceof ArrayBuffer?`[ArrayBuffer: ${e.byteLength} bytes]`:e instanceof Blob?`[Blob: ${e.size} bytes, type: ${e.type}]`:ArrayBuffer.isView(e)?`[ArrayBufferView: ${e.byteLength} bytes]`:e}calculateMessageSize(e){return"string"==typeof e?new Blob([e]).size:e instanceof ArrayBuffer?e.byteLength:e instanceof Blob?e.size:ArrayBuffer.isView(e)?e.byteLength:0}getActiveConnections(){return Array.from(this.connections.values())}getConnection(e){return this.connections.get(e)}}var h=Object.freeze({__proto__:null,NetworkMonitor:class{constructor(e){this.entries=new Map,this.isActive=!1,this.inspector=e,this.fetchInterceptor=new c({onRequest:this.handleRequest.bind(this,"fetch"),onResponse:this.handleResponse.bind(this),onError:this.handleError.bind(this)}),this.xhrInterceptor=new l({onRequest:this.handleRequest.bind(this,"xhr"),onResponse:this.handleResponse.bind(this),onError:this.handleError.bind(this),onProgress:this.handleProgress.bind(this)}),this.websocketMonitor=new d({onConnection:this.handleWebSocketConnection.bind(this),onMessage:this.handleWebSocketMessage.bind(this),onStatusChange:this.handleWebSocketStatusChange.bind(this),onError:this.handleWebSocketError.bind(this)})}start(){this.isActive||(this.fetchInterceptor.install(),this.xhrInterceptor.install(),this.websocketMonitor.install(),this.installBeaconInterceptor(),this.isActive=!0)}stop(){this.isActive&&(this.fetchInterceptor.uninstall(),this.xhrInterceptor.uninstall(),this.websocketMonitor.uninstall(),this.uninstallBeaconInterceptor(),this.isActive=!1)}handleRequest(e,t){const n={id:t.id,type:e,request:t,timestamp:t.timestamp};this.entries.set(t.id,n),this.inspector.getStorage("network").push(n),this.inspector.getEvents().emit("network:request",{...t,type:e})}handleResponse(e){var t,n,s,r;const i=this.entries.get(e.id);i&&(i.response=e,i.duration=e.duration,i.status=e.status,i.size=e.size,this.inspector.getStorage("network").push(i),this.inspector.getEvents().emit("network:response",e),e.duration>3e3&&(null===(n=(t=this.inspector.getConfig()).onPerformanceIssue)||void 0===n||n.call(t,{type:"slow-network",message:`Slow network request: ${null===(s=i.request)||void 0===s?void 0:s.url}`,duration:e.duration,url:null===(r=i.request)||void 0===r?void 0:r.url})))}handleError(e){const t=this.entries.get(e.id);t&&(t.error=e,this.inspector.getStorage("network").push(t),this.inspector.getEvents().emit("network:error",e))}handleProgress(e){this.inspector.getEvents().emit("network:progress",e)}handleWebSocketConnection(e){const t={id:e.id,type:"websocket",websocket:{connection:e,messages:[],errors:[]},timestamp:e.timestamp};this.entries.set(e.id,t),this.inspector.getStorage("network").push(t),this.inspector.getEvents().emit("network:websocket:connection",e)}handleWebSocketMessage(e){const t=this.entries.get(e.connectionId);t&&t.websocket&&(t.websocket.messages.push(e),this.inspector.getEvents().emit("network:websocket:message",e))}handleWebSocketStatusChange(e){var t;const n=this.entries.get(e.connectionId);n&&(null===(t=n.websocket)||void 0===t?void 0:t.connection)&&(n.websocket.connection.status=e.status,this.inspector.getEvents().emit("network:websocket:status",e))}handleWebSocketError(e){const t=this.entries.get(e.connectionId);t&&t.websocket&&(t.websocket.errors.push(e),this.inspector.getEvents().emit("network:websocket:error",e))}installBeaconInterceptor(){if(!navigator.sendBeacon)return;const e=navigator.sendBeacon.bind(navigator),t=this;navigator.sendBeacon=function(n,s){const r=t.generateId(),i={id:r,method:"POST",url:n,headers:{},body:t.sanitizeBeaconData(s),timestamp:Date.now(),type:"beacon"};t.handleRequest("beacon",i);const o=e(n,s);return setTimeout(()=>{const e={id:r,status:o?204:0,statusText:o?"No Content":"Failed",headers:{},size:0,duration:0,timestamp:Date.now()};t.handleResponse(e)},0),o},this.beaconInterceptor=e}uninstallBeaconInterceptor(){this.beaconInterceptor&&navigator.sendBeacon&&(navigator.sendBeacon=this.beaconInterceptor)}sanitizeBeaconData(e){if(e){if("string"==typeof e)return e.length>1e3?e.substring(0,1e3)+"...":e;if(e instanceof FormData){const t={};return e.forEach((e,n)=>{t[n]=e instanceof File?`[File: ${e.name}]`:e}),{type:"FormData",entries:t}}return e instanceof Blob?`[Blob: ${e.size} bytes]`:e instanceof ArrayBuffer?`[ArrayBuffer: ${e.byteLength} bytes]`:e}}generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}getEntries(){return Array.from(this.entries.values())}clearEntries(){this.entries.clear()}getEntry(e){return this.entries.get(e)}filterEntries(e){return Array.from(this.entries.values()).filter(e)}}});class p{constructor(e={},t=!0){this.originalMethods=new Map,this.groupLevel=0,this.counters=new Map,this.timers=new Map,this.handlers=e,this.captureStackTraces=t}install(){["log","info","warn","error","debug","trace","table","group","groupCollapsed","groupEnd","clear","count","countReset","time","timeEnd","timeLog","assert","dir","dirxml","profile","profileEnd"].forEach(e=>{this.originalMethods.set(e,console[e]),this.interceptMethod(e)})}uninstall(){this.originalMethods.forEach((e,t)=>{console[t]=e}),this.originalMethods.clear(),this.counters.clear(),this.timers.clear(),this.groupLevel=0}interceptMethod(e){const t=this,n=this.originalMethods.get(e);console[e]=function(...s){var r,i,o,c;switch(n.apply(console,s),e){case"clear":return void(null===(i=(r=t.handlers).onClear)||void 0===i||i.call(r));case"group":case"groupCollapsed":t.groupLevel++;break;case"groupEnd":t.groupLevel=Math.max(0,t.groupLevel-1);break;case"count":return void t.handleCount(s[0]);case"countReset":return void t.counters.delete(s[0]||"default");case"time":return void t.timers.set(s[0]||"default",performance.now());case"timeEnd":return void t.handleTimeEnd(s[0],"timeEnd");case"timeLog":t.handleTimeEnd(s[0],"timeLog");break;case"assert":if(s[0])return;s=s.slice(1)}const l={id:a(),level:e,args:s,formattedArgs:t.formatArgs(s),timestamp:Date.now(),groupLevel:t.groupLevel};if(t.captureStackTraces&&("error"===e||"warn"===e||"trace"===e)){const e=((new Error).stack||"").split("\n").slice(1).map(e=>e.trim()).filter(e=>e.startsWith("at "));l.stack=e.slice(1),l.source=t.extractSourceFromStack(e[1])}null===(c=(o=t.handlers).onLog)||void 0===c||c.call(o,l)}}handleCount(e){var t,n;const s=e||"default",r=(this.counters.get(s)||0)+1;this.counters.set(s,r);const i={id:a(),level:"log",args:[`${s}: ${r}`],formattedArgs:[`${s}: ${r}`],timestamp:Date.now(),groupLevel:this.groupLevel};null===(n=(t=this.handlers).onLog)||void 0===n||n.call(t,i)}handleTimeEnd(e,t){var n,s,r,i;const o=e||"default",c=this.timers.get(o);if(void 0===c){const e={id:a(),level:"warn",args:[`Timer '${o}' does not exist`],formattedArgs:[`Timer '${o}' does not exist`],timestamp:Date.now(),groupLevel:this.groupLevel};return void(null===(s=(n=this.handlers).onLog)||void 0===s||s.call(n,e))}const l=performance.now()-c;"timeEnd"===t&&this.timers.delete(o);const d={id:a(),level:"log",args:[`${o}: ${l.toFixed(3)}ms`],formattedArgs:[`${o}: ${l.toFixed(3)}ms`],timestamp:Date.now(),groupLevel:this.groupLevel};null===(i=(r=this.handlers).onLog)||void 0===i||i.call(r,d)}formatArgs(e){return e.map(e=>this.formatValue(e))}formatValue(e){if(null===e)return"null";if(void 0===e)return"undefined";const t=typeof e;if("string"===t||"number"===t||"boolean"===t)return e;if(e instanceof Error)return{type:"error",name:e.name,message:e.message,stack:e.stack};if(e instanceof Date)return{type:"date",value:e.toISOString()};if(e instanceof RegExp)return{type:"regexp",value:e.toString()};if("function"==typeof e)return{type:"function",name:e.name||"<anonymous>",value:e.toString().substring(0,100)};if(Array.isArray(e))return{type:"array",length:e.length,value:e.slice(0,100).map(e=>this.formatValue(e))};if("object"===t)try{const t=function(e){const t=new WeakSet;return JSON.stringify(e,(e,n)=>{if("object"==typeof n&&null!==n){if(t.has(n))return"[Circular]";t.add(n)}return"function"==typeof n?n.toString():n instanceof Error?{name:n.name,message:n.message,stack:n.stack}:n},2)}(e);return{type:"object",value:JSON.parse(t)}}catch(e){return{type:"object",value:"[Complex Object]"}}return String(e)}extractSourceFromStack(e){if(!e)return;const t=e.match(/at\s+(?:(.+?)\s+\()?(.+?):(\d+):(\d+)\)?$/);if(!t)return;const[,,n,s,r]=t;return{file:n.replace(/^.*\//,""),line:parseInt(s,10),column:parseInt(r,10)}}}class u{formatArgs(e){return e.map(e=>this.formatValue(e))}formatArgsAsText(e){return e.map(e=>this.formatValueAsText(e)).join(" ")}formatValue(e){var t;if(null===e)return"null";if(void 0===e)return"undefined";const n=typeof e;if("string"===n||"number"===n||"boolean"===n)return e;if(e instanceof Error)return{type:"error",name:e.name,message:e.message,stack:e.stack};if(e instanceof Date)return{type:"date",value:e.toISOString()};if(e instanceof RegExp)return{type:"regexp",value:e.toString()};if(e instanceof Set)return{type:"set",size:e.size,values:Array.from(e).slice(0,100)};if(e instanceof Map)return{type:"map",size:e.size,entries:Array.from(e.entries()).slice(0,100)};if(e instanceof WeakSet||e instanceof WeakMap)return{type:e instanceof WeakSet?"weakset":"weakmap",value:"[WeakCollection]"};if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)return{type:"arraybuffer",byteLength:e.byteLength};if("function"==typeof e)return{type:"function",name:e.name||"<anonymous>",value:e.toString().substring(0,100)};if(Array.isArray(e))return{type:"array",length:e.length,value:e.slice(0,100).map(e=>this.formatValue(e))};if("object"===n){if(e.type&&void 0!==e.value)return e;try{const n=Object.getPrototypeOf(e),s=(null===(t=null==n?void 0:n.constructor)||void 0===t?void 0:t.name)||"Object",r=Object.entries(e).slice(0,100),i={type:"object",constructor:s,value:{}};for(const[e,t]of r)i.value[e]=this.formatValue(t);return Object.keys(e).length>100&&(i.truncated=!0,i.totalKeys=Object.keys(e).length),i}catch(e){return{type:"object",value:"[Complex Object]"}}}return String(e)}formatValueAsText(e){if(null===e)return"null";if(void 0===e)return"undefined";const t=typeof e;if("string"===t)return`"${e}"`;if("number"===t||"boolean"===t)return String(e);if(e.type)switch(e.type){case"error":return`${e.name}: ${e.message}`;case"date":case"regexp":return e.value;case"function":return`[Function: ${e.name}]`;case"array":return`Array(${e.length})`;case"object":return e.constructor?`${e.constructor} {...}`:"Object {...}";case"set":return`Set(${e.size})`;case"map":return`Map(${e.size})`;default:return JSON.stringify(e.value)}return JSON.stringify(e)}formatStackTrace(e){return e.map((e,t)=>{const n=e.replace(/^\s*at\s+/,"");return"  ".repeat(t)+n}).join("\n")}highlightSyntax(e,t="javascript"){let n=e;return n=n.replace(/(["'`])(?:(?=(\\?))\2.)*?\1/g,'<span class="string">$&</span>'),n=n.replace(/\b(\d+)\b/g,'<span class="number">$1</span>'),["const","let","var","function","class","if","else","for","while","return","new","this","typeof","instanceof","try","catch","finally","throw","async","await","import","export","default"].forEach(e=>{const t=new RegExp(`\\b${e}\\b`,"g");n=n.replace(t,`<span class="keyword">${e}</span>`)}),n=n.replace(/(\/\/.*$)/gm,'<span class="comment">$1</span>'),n=n.replace(/(\/\*[\s\S]*?\*\/)/g,'<span class="comment">$1</span>'),n}}var m=Object.freeze({__proto__:null,ConsoleMonitor:class{constructor(e){this.isActive=!1,this.commandHistory=[],this.historyIndex=-1,this.inspector=e,this.formatter=new u,this.interceptor=new p({onLog:this.handleLog.bind(this),onClear:this.handleClear.bind(this)},e.getConfig().captureStackTraces)}start(){this.isActive||(this.interceptor.install(),this.setupCommandExecution(),this.isActive=!0)}stop(){this.isActive&&(this.interceptor.uninstall(),this.isActive=!1)}handleLog(e){this.inspector.getStorage("console").push(e),this.inspector.getEvents().emit("console:log",e),"error"===e.level&&this.inspector.getEvents().emit("error:caught",{message:this.formatter.formatArgs(e.args),stack:e.stack,timestamp:e.timestamp,source:"console"})}handleClear(){this.inspector.getStorage("console").clear(),this.inspector.getEvents().emit("console:clear")}setupCommandExecution(){this.inspector.on("console:execute",e=>{this.executeCommand(e)})}executeCommand(e){var t;this.commandHistory.push(e),this.historyIndex=this.commandHistory.length;const n={id:`cmd-${Date.now()}`,level:"log",args:[`> ${e}`],formattedArgs:[`> ${e}`],timestamp:Date.now(),groupLevel:0};this.handleLog(n);try{const t=(0,eval)(e);if(void 0!==t){const e={id:`result-${Date.now()}`,level:"log",args:[t],formattedArgs:this.formatter.formatArgs([t]),timestamp:Date.now(),groupLevel:0};this.handleLog(e)}}catch(e){const n={id:`error-${Date.now()}`,level:"error",args:[e],formattedArgs:this.formatter.formatArgs([e]),timestamp:Date.now(),groupLevel:0,stack:null===(t=e.stack)||void 0===t?void 0:t.split("\n")};this.handleLog(n)}}getHistory(){return[...this.commandHistory]}navigateHistory(e){if(0!==this.commandHistory.length)return this.historyIndex="up"===e?Math.max(0,this.historyIndex-1):Math.min(this.commandHistory.length-1,this.historyIndex+1),this.commandHistory[this.historyIndex]}filterLogs(e){return this.inspector.getStorage("console").getAll().filter(t=>{var n;if(e.levels&&e.levels.length>0&&!e.levels.includes(t.level))return!1;if(e.search){const n=e.search.toLowerCase();if(!JSON.stringify(t.formattedArgs).toLowerCase().includes(n))return!1}return!(e.source&&(null===(n=t.source)||void 0===n?void 0:n.file)&&!t.source.file.includes(e.source))})}exportLogs(e="json"){const t=this.inspector.getStorage("console").getAll();return"json"===e?JSON.stringify(t,null,2):t.map(e=>`[${new Date(e.timestamp).toISOString()}] ${e.level.toUpperCase().padEnd(5)} ${this.formatter.formatArgsAsText(e.formattedArgs)}${e.source?` [${e.source.file}:${e.source.line}]`:""}`).join("\n")}}});class g{constructor(e,t=1e3){this.isRunning=!1,this.lastTime=0,this.frameCount=0,this.fps=0,this.frameTimeSum=0,this.droppedFrames=0,this.animationId=null,this.lastUpdateTime=0,this.tick=()=>{if(!this.isRunning)return;const e=performance.now(),t=e-this.lastTime;this.frameTimeSum+=t,this.frameCount++,t>16.67&&this.droppedFrames++;const n=e-this.lastUpdateTime;if(n>=this.updateInterval){this.fps=1e3*this.frameCount/n;const t=this.frameTimeSum/this.frameCount;this.callback({fps:Math.round(this.fps),timestamp:Date.now(),frameTime:t,droppedFrames:this.droppedFrames}),this.frameCount=0,this.frameTimeSum=0,this.droppedFrames=0,this.lastUpdateTime=e}this.lastTime=e,this.animationId=requestAnimationFrame(this.tick)},this.callback=e,this.updateInterval=t}start(){this.isRunning||(this.isRunning=!0,this.lastTime=performance.now(),this.lastUpdateTime=this.lastTime,this.frameCount=0,this.frameTimeSum=0,this.droppedFrames=0,this.tick())}stop(){this.isRunning&&(this.isRunning=!1,null!==this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null))}getCurrentFPS(){return Math.round(this.fps)}}class f{constructor(e,t=1e3){this.intervalId=null,this.callback=e,this.updateInterval=t,this.isSupported=this.checkSupport()}checkSupport(){return"memory"in performance&&void 0!==performance.memory}start(){this.isSupported?null===this.intervalId&&(this.measure(),this.intervalId=window.setInterval(()=>{this.measure()},this.updateInterval)):console.warn("Performance.memory is not supported in this browser")}stop(){null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}measure(){if(!performance.memory)return;const{usedJSHeapSize:e,totalJSHeapSize:t,jsHeapSizeLimit:n}=performance.memory,s=e/n*100,r={usedJSHeapSize:e,totalJSHeapSize:t,jsHeapSizeLimit:n,timestamp:Date.now(),percentUsed:s};this.callback(r)}getCurrentMemory(){if(!this.isSupported||!performance.memory)return null;const{usedJSHeapSize:e,totalJSHeapSize:t,jsHeapSizeLimit:n}=performance.memory;return{usedJSHeapSize:e,totalJSHeapSize:t,jsHeapSizeLimit:n,timestamp:Date.now(),percentUsed:e/n*100}}isMemorySupported(){return this.isSupported}}class v{constructor(e){this.metrics={},this.observer=null,this.fidObserver=null,this.clsValue=0,this.clsEntries=[],this.sessionValue=0,this.sessionEntries=[],this.callback=e}start(){this.observePaintMetrics(),this.observeLCP(),this.observeFID(),this.observeCLS(),this.observeINP(),this.measureNavigationTiming()}stop(){var e,t;null===(e=this.observer)||void 0===e||e.disconnect(),null===(t=this.fidObserver)||void 0===t||t.disconnect(),this.observer=null,this.fidObserver=null}observePaintMetrics(){try{new PerformanceObserver(e=>{for(const t of e.getEntries())"first-contentful-paint"===t.name&&(this.metrics.FCP=Math.round(t.startTime),this.reportMetrics())}).observe({entryTypes:["paint"]})}catch(e){console.warn("Paint metrics not supported")}}observeLCP(){try{new PerformanceObserver(e=>{const t=e.getEntries();this.metrics.LCP=Math.round(t[t.length-1].startTime),this.reportMetrics()}).observe({entryTypes:["largest-contentful-paint"]})}catch(e){console.warn("LCP not supported")}}observeFID(){try{this.fidObserver=new PerformanceObserver(e=>{var t;for(const n of e.getEntries())"first-input"===n.name&&(this.metrics.FID=Math.round(n.processingStart-n.startTime),this.reportMetrics(),null===(t=this.fidObserver)||void 0===t||t.disconnect())}),this.fidObserver.observe({entryTypes:["first-input"]})}catch(e){console.warn("FID not supported")}}observeCLS(){try{new PerformanceObserver(e=>{for(const t of e.getEntries())t.hadRecentInput||(this.clsValue+=t.value,this.clsEntries.push(t));this.metrics.CLS=Math.round(1e3*this.clsValue)/1e3,this.reportMetrics()}).observe({entryTypes:["layout-shift"]})}catch(e){console.warn("CLS not supported")}}observeINP(){try{let e=0;new PerformanceObserver(t=>{for(const n of t.getEntries())if("event"===n.entryType){const t=n.duration;t>e&&(e=t,this.metrics.INP=Math.round(e),this.reportMetrics())}}).observe({entryTypes:["event"]})}catch(e){console.warn("INP not supported")}}measureNavigationTiming(){if(!performance.timing)return;const e=performance.timing;this.metrics.TTFB=Math.round(e.responseStart-e.navigationStart),this.reportMetrics()}reportMetrics(){this.callback({...this.metrics})}getMetrics(){return{...this.metrics}}markStart(e){performance.mark(`${e}-start`)}markEnd(e){performance.mark(`${e}-end`);try{performance.measure(e,`${e}-start`,`${e}-end`);const t=performance.getEntriesByName(e,"measure");if(t.length>0)return t[t.length-1].duration}catch(t){console.warn(`Failed to measure ${e}`)}}clearMarks(e){e?(performance.clearMarks(`${e}-start`),performance.clearMarks(`${e}-end`),performance.clearMeasures(e)):(performance.clearMarks(),performance.clearMeasures())}}class b{constructor(e,t=50){this.observer=null,this.idCounter=0,this.callback=e,this.threshold=t}start(){if(!this.observer)try{this.observer=new PerformanceObserver(e=>{for(const t of e.getEntries())t.duration>=this.threshold&&this.handleLongTask(t)}),this.observer.observe({entryTypes:["longtask"]})}catch(e){console.warn("Long Task API not supported"),this.fallbackDetection()}}stop(){var e;null===(e=this.observer)||void 0===e||e.disconnect(),this.observer=null}handleLongTask(e){const t=e,n={id:"longtask-"+ ++this.idCounter,duration:Math.round(e.duration),startTime:Math.round(e.startTime),timestamp:Date.now(),attribution:t.attribution?t.attribution.map(e=>({name:e.name,containerType:e.containerType,containerSrc:e.containerSrc,containerId:e.containerId,containerName:e.containerName})):[]};this.callback(n)}fallbackDetection(){let e=performance.now();const t=()=>{const n=performance.now(),s=n-e;if(s>this.threshold){const t={id:"longtask-fallback-"+ ++this.idCounter,duration:Math.round(s),startTime:Math.round(e),timestamp:Date.now(),attribution:[{name:"unknown",containerType:"window"}]};this.callback(t)}e=n,null===this.observer&&requestAnimationFrame(t)};requestAnimationFrame(t)}}var y=Object.freeze({__proto__:null,PerformanceMonitor:class{constructor(e){this.isActive=!1,this.performanceData={timestamp:Date.now()},this.inspector=e,this.fpsMonitor=new g(this.handleFPSData.bind(this)),this.memoryMonitor=new f(this.handleMemoryData.bind(this)),this.metricsCollector=new v(this.handleMetrics.bind(this)),this.longTaskDetector=new b(this.handleLongTask.bind(this)),this.emitPerformanceData=function(e,t,n={}){let s,r,i=null,o=0,a=null;const{leading:c=!0,trailing:l=!0}=n,d=()=>{const t=a,n=s;return a=s=null,r=e.apply(n,t),r};return function(...e){const n=Date.now(),h=t-(n-o);return s=this,a=e,h<=0||h>t?(i&&(clearTimeout(i),i=null),o=n,c&&(r=d())):!i&&l&&(i=setTimeout(()=>{o=Date.now(),i=null,l&&a&&d()},h)),r}}(this.emitPerformanceData.bind(this),100)}start(){this.isActive||(this.fpsMonitor.start(),this.memoryMonitor.start(),this.metricsCollector.start(),this.longTaskDetector.start(),this.setupPerformanceObservers(),this.monitorResourceTiming(),this.isActive=!0)}stop(){this.isActive&&(this.fpsMonitor.stop(),this.memoryMonitor.stop(),this.metricsCollector.stop(),this.longTaskDetector.stop(),this.isActive=!1)}handleFPSData(e){var t,n;this.performanceData.fps=e,this.inspector.getStorage("performance").set("fps",e),e.fps<30&&(null===(n=(t=this.inspector.getConfig()).onPerformanceIssue)||void 0===n||n.call(t,{type:"low-fps",message:`Low FPS detected: ${e.fps}`,fps:e.fps,droppedFrames:e.droppedFrames})),this.emitPerformanceData()}handleMemoryData(e){var t,n;this.performanceData.memory=e,this.inspector.getStorage("performance").set("memory",e),e.percentUsed>90&&(null===(n=(t=this.inspector.getConfig()).onPerformanceIssue)||void 0===n||n.call(t,{type:"high-memory",message:`High memory usage: ${e.percentUsed.toFixed(1)}%`,percentUsed:e.percentUsed,usedBytes:e.usedJSHeapSize})),this.emitPerformanceData()}handleMetrics(e){var t,n,s,r,i,o;this.performanceData.metrics=e,this.inspector.getStorage("performance").set("metrics",e),e.LCP&&e.LCP>2500&&(null===(n=(t=this.inspector.getConfig()).onPerformanceIssue)||void 0===n||n.call(t,{type:"poor-lcp",message:`Poor LCP: ${e.LCP}ms`,value:e.LCP})),e.FID&&e.FID>100&&(null===(r=(s=this.inspector.getConfig()).onPerformanceIssue)||void 0===r||r.call(s,{type:"poor-fid",message:`Poor FID: ${e.FID}ms`,value:e.FID})),e.CLS&&e.CLS>.1&&(null===(o=(i=this.inspector.getConfig()).onPerformanceIssue)||void 0===o||o.call(i,{type:"poor-cls",message:`Poor CLS: ${e.CLS}`,value:e.CLS})),this.inspector.getEvents().emit("performance:metrics",e)}handleLongTask(e){var t,n;const s=this.inspector.getStorage("performance"),r=s.get("longTasks")||[];r.push(e),r.length>100&&r.shift(),s.set("longTasks",r),this.inspector.getEvents().emit("performance:longtask",e),e.duration>200&&(null===(n=(t=this.inspector.getConfig()).onPerformanceIssue)||void 0===n||n.call(t,{type:"long-task",message:`Long task detected: ${e.duration}ms`,duration:e.duration,attribution:e.attribution}))}emitPerformanceData(){this.performanceData.timestamp=Date.now(),this.inspector.getEvents().emit("performance:data",this.performanceData)}setupPerformanceObservers(){if("PerformanceObserver"in window)try{new PerformanceObserver(e=>{for(const t of e.getEntries())this.inspector.getEvents().emit("performance:navigation",{name:t.name,duration:t.duration,startTime:t.startTime,timestamp:Date.now()})}).observe({entryTypes:["navigation"]})}catch(e){console.warn("Navigation timing observation not supported")}}monitorResourceTiming(){if("PerformanceObserver"in window)try{new PerformanceObserver(e=>{var t,n;for(const s of e.getEntries()){const e=s;e.duration>1e3&&(null===(n=(t=this.inspector.getConfig()).onPerformanceIssue)||void 0===n||n.call(t,{type:"slow-resource",message:`Slow resource: ${e.name}`,duration:e.duration,url:e.name}))}}).observe({entryTypes:["resource"]})}catch(e){console.warn("Resource timing observation not supported")}}markStart(e){this.metricsCollector.markStart(e)}markEnd(e){const t=this.metricsCollector.markEnd(e);void 0!==t&&this.inspector.getEvents().emit("performance:mark",{name:e,duration:t,timestamp:Date.now()})}getSnapshot(){return{fps:this.performanceData.fps,memory:this.memoryMonitor.getCurrentMemory()||void 0,metrics:this.metricsCollector.getMetrics(),longTasks:this.inspector.getStorage("performance").get("longTasks")||[],timestamp:Date.now()}}}});class w{constructor(e){this.groups=new Map,this.seenErrors=new WeakSet,this.ignorePatterns=[],this.callback=e,this.setupDefaultIgnorePatterns()}setupDefaultIgnorePatterns(){this.ignorePatterns=[/ResizeObserver loop limit exceeded/,/ResizeObserver loop completed with undelivered notifications/,/Non-Error promise rejection captured/,/Network request failed/,/Failed to fetch/,/Load failed/,/Script error/]}addIgnorePattern(e){this.ignorePatterns.push(e)}trackError(e,t="error"){if(e instanceof Error&&this.seenErrors.has(e))return;const n=this.createErrorInfo(e,t);if(this.shouldIgnoreError(n))return;e instanceof Error&&this.seenErrors.add(e);const s=this.groupError(n);n.groupId=s.id,this.callback(n)}createErrorInfo(e,t){let n,s,r,i,o="",c=[];if(e instanceof Error)o=e.message||e.toString(),c=e.stack?e.stack.split("\n").map(e=>e.trim()):[],i={name:e.name,message:e.message,stack:e.stack};else if("message"in e&&e instanceof ErrorEvent)o=e.message,n=e.filename,s=e.lineno,r=e.colno,e.error&&(c=e.error.stack?e.error.stack.split("\n").map(e=>e.trim()):[],i=e.error);else if("reason"in e&&e instanceof PromiseRejectionEvent){const t=e.reason;t instanceof Error?(o=t.message||t.toString(),c=t.stack?t.stack.split("\n").map(e=>e.trim()):[],i=t):(o=String(t),i=t)}const l=c.map(e=>function(e){const t=e.match(/at\s+(?:(.+?)\s+\()?(.+?):(\d+):(\d+)\)?$/);if(!t)return null;const[,n,s,r,i]=t;return{functionName:n||"<anonymous>",fileName:s||"<unknown>",lineNumber:parseInt(r||"0",10),columnNumber:parseInt(i||"0",10)}}(e)).filter(e=>null!==e);return{id:a(),type:t,message:o,stack:c,stackFrames:l,source:n,lineno:s,colno:r,timestamp:Date.now(),userAgent:navigator.userAgent,url:window.location.href,errorObject:i,count:1}}shouldIgnoreError(e){var t;for(const t of this.ignorePatterns)if(t.test(e.message))return!0;return"Script error."===e.message&&!(null===(t=e.stack)||void 0===t?void 0:t.length)||!(!e.source||!(e.source.includes("extension://")||e.source.includes("chrome-extension://")||e.source.includes("moz-extension://")))}groupError(e){const t=this.generateFingerprint(e);let n=this.groups.get(t);return n||(n={id:a(),fingerprint:t,message:e.message,count:0,firstSeen:e.timestamp,lastSeen:e.timestamp,errors:[]},this.groups.set(t,n)),n.count++,n.lastSeen=e.timestamp,n.errors.push(e),n.errors.length>10&&n.errors.shift(),n}generateFingerprint(e){const t=[e.type,this.normalizeMessage(e.message)];if(e.stackFrames&&e.stackFrames.length>0){const n=e.stackFrames[0];n.fileName&&(t.push(n.fileName),n.functionName&&t.push(n.functionName))}else e.source&&t.push(e.source);return t.join("|")}normalizeMessage(e){return e.replace(/https?:\/\/[^\s]+/g,"<URL>").replace(/\b\d+\b/g,"<NUM>").replace(/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/gi,"<UUID>").replace(/"[^"]*"/g,'"<STRING>"').replace(/'[^']*'/g,"'<STRING>'").replace(/\s+/g," ").trim()}getGroups(){return Array.from(this.groups.values()).sort((e,t)=>t.lastSeen-e.lastSeen)}getGroup(e){for(const t of this.groups.values())if(t.id===e)return t}clearGroups(){this.groups.clear()}getErrorStats(){let e=0;const t={},n=[];for(const s of this.groups.values()){e+=s.count;for(const e of s.errors)t[e.type]=(t[e.type]||0)+1,n.push(e)}return n.sort((e,t)=>t.timestamp-e.timestamp),{totalErrors:e,totalGroups:this.groups.size,errorsByType:t,recentErrors:n.slice(0,10)}}}class x{constructor(){this.cache={},this.enabled=!0,this.sourceMapUrlRegex=/\/\/# sourceMappingURL=(.+)$/,this.checkSupport()}checkSupport(){return this.enabled="undefined"!=typeof fetch&&"URL"in window,this.enabled}async enhanceStackTrace(e){if(!this.enabled)return e;const t=[];for(const n of e){const e=await this.enhanceStackFrame(n);t.push(e)}return t}async enhanceStackFrame(e){const t=e.match(/at\s+(?:(.+?)\s+\()?(.+?):(\d+):(\d+)\)?$/);if(!t)return e;const[,n,s,r,i]=t,o=parseInt(r,10),a=parseInt(i,10);try{const t=await this.findSourceMapUrl(s);if(!t)return e;const r=await this.loadSourceMap(s,t);if(!r)return e;const i=this.getOriginalPosition(r,o,a);if(i)return`at ${n?`${n} `:""}(${i.source}:${i.line}:${i.column})`}catch(e){console.debug("Failed to enhance stack frame:",e)}return e}async findSourceMapUrl(e){if(this.cache[e])return this.cache[e].sourceMapUrl;try{if(e.startsWith("data:")||e.includes("blob:"))return null;const t=await fetch(e,{method:"GET",mode:"cors",credentials:"omit"});if(!t.ok)return null;const n=(await t.text()).split("\n").slice(-5).join("\n").match(this.sourceMapUrlRegex);if(!n)return null;const s=n[1];return s.startsWith("data:")?s:new URL(s,e).href}catch(e){return null}}async loadSourceMap(e,t){var n;if(null===(n=this.cache[e])||void 0===n?void 0:n.sourceMap)return this.cache[e].sourceMap;try{let n;if(t.startsWith("data:")){const e=t.split(",")[1];n=atob(e)}else{const e=await fetch(t,{method:"GET",mode:"cors",credentials:"omit"});if(!e.ok)return null;n=await e.text()}const s=JSON.parse(n);return this.cache[e]={sourceMapUrl:t,sourceMap:s},s}catch(e){return null}}getOriginalPosition(e,t,n){var s;return e.mappings&&e.sources?{source:e.sources[0]||"unknown",line:t,column:n,name:null===(s=e.names)||void 0===s?void 0:s[0]}:null}clearCache(){this.cache={}}setEnabled(e){this.enabled=e&&this.checkSupport()}isEnabled(){return this.enabled}}var k=Object.freeze({__proto__:null,ErrorMonitor:class{constructor(e){this.isActive=!1,this.originalHandlers={error:null,unhandledrejection:null},this.handleErrorEvent=e=>{this.errorTracker.trackError(e,"error")},this.handleRejectionEvent=e=>{this.errorTracker.trackError(e,"unhandledRejection")},this.inspector=e,this.errorTracker=new w(this.handleError.bind(this)),this.sourceMapSupport=new x}start(){this.isActive||(this.installErrorHandlers(),this.isActive=!0)}stop(){this.isActive&&(this.uninstallErrorHandlers(),this.isActive=!1)}installErrorHandlers(){this.originalHandlers.error=window.onerror,this.originalHandlers.unhandledrejection=window.onunhandledrejection,window.onerror=(e,t,n,s,r)=>{const i=new ErrorEvent("error",{message:String(e),filename:t,lineno:n,colno:s,error:r});return this.errorTracker.trackError(i,"error"),!this.originalHandlers.error||this.originalHandlers.error(e,t,n,s,r)},window.onunhandledrejection=e=>(this.errorTracker.trackError(e,"unhandledRejection"),!this.originalHandlers.unhandledrejection||this.originalHandlers.unhandledrejection(e)),window.addEventListener("error",this.handleErrorEvent),window.addEventListener("unhandledrejection",this.handleRejectionEvent)}uninstallErrorHandlers(){window.onerror=this.originalHandlers.error,window.onunhandledrejection=this.originalHandlers.unhandledrejection,window.removeEventListener("error",this.handleErrorEvent),window.removeEventListener("unhandledrejection",this.handleRejectionEvent)}async handleError(e){var t,n;if(e.stack&&this.sourceMapSupport.isEnabled())try{e.stack=await this.sourceMapSupport.enhanceStackTrace(e.stack)}catch(e){console.debug("Failed to enhance stack trace:",e)}this.inspector.getStorage("error").push(e),this.inspector.getEvents().emit("unhandledRejection"===e.type?"error:uncaught":"error:caught",e),null===(n=(t=this.inspector.getConfig()).onError)||void 0===n||n.call(t,new Error(e.message)),this.inspector.getConfig().enabled&&console.error("[DevInspector] Error captured:",e)}trackError(e){this.errorTracker.trackError(e)}getErrorGroups(){return this.errorTracker.getGroups()}getErrorStats(){return this.errorTracker.getErrorStats()}clearErrors(){this.errorTracker.clearGroups(),this.inspector.getStorage("error").clear()}addIgnorePattern(e){this.errorTracker.addIgnorePattern(e)}enableSourceMaps(e){this.sourceMapSupport.setEnabled(e)}}}),E=Object.freeze({__proto__:null,StateMonitor:class{constructor(e){this.isActive=!1,this.inspector=e}start(){this.isActive||(this.isActive=!0)}stop(){this.isActive&&(this.isActive=!1)}}}),S=Object.freeze({__proto__:null,DOMMonitor:class{constructor(e){this.isActive=!1,this.inspector=e}start(){this.isActive||(this.isActive=!0)}stop(){this.isActive&&(this.isActive=!1)}}}),$=Object.freeze({__proto__:null,StorageMonitor:class{constructor(e){this.isActive=!1,this.inspector=e}start(){this.isActive||(this.isActive=!0)}stop(){this.isActive&&(this.isActive=!1)}}});class M{constructor(e){this.isDragging=!1,this.dragOffset={x:0,y:0},this.errorCount=0,this.inspector=e,this.element=this.createElement(),this.setupEventListeners(),this.updatePosition()}createElement(){const e=document.createElement("div");return e.className="devinspector-floating-widget",e.innerHTML="ðŸ”",e.title="DevInspector - Click to toggle, drag to move",e}setupEventListeners(){this.element.addEventListener("click",e=>{this.isDragging||this.inspector.toggle()}),this.element.addEventListener("mousedown",this.handleMouseDown.bind(this)),document.addEventListener("mousemove",this.handleMouseMove.bind(this)),document.addEventListener("mouseup",this.handleMouseUp.bind(this)),this.inspector.on("error:caught",()=>{this.errorCount++,this.updateAppearance()}),this.inspector.on("error:uncaught",()=>{this.errorCount++,this.updateAppearance()}),this.inspector.on("inspector:show",()=>{this.errorCount=0,this.updateAppearance()})}handleMouseDown(e){e.preventDefault(),this.isDragging=!0;const t=this.element.getBoundingClientRect();this.dragOffset={x:e.clientX-t.left,y:e.clientY-t.top},this.element.style.cursor="grabbing",this.element.style.zIndex="1000000"}handleMouseMove(e){if(!this.isDragging)return;e.preventDefault();const t=e.clientY-this.dragOffset.y,n=window.innerWidth-this.element.offsetWidth,s=window.innerHeight-this.element.offsetHeight,r=Math.max(0,Math.min(e.clientX-this.dragOffset.x,n)),i=Math.max(0,Math.min(t,s));this.element.style.left=`${r}px`,this.element.style.top=`${i}px`,this.element.style.right="auto",this.element.style.bottom="auto"}handleMouseUp(){this.isDragging&&(this.isDragging=!1,this.element.style.cursor="pointer",this.element.style.zIndex="999998",this.snapToEdge())}snapToEdge(){const e=this.element.getBoundingClientRect(),t=e.left+e.width/2,n=e.top+e.height/2,s={left:t,right:window.innerWidth-t,top:n,bottom:window.innerHeight-n};switch(Object.keys(s).reduce((e,t)=>s[e]<s[t]?e:t)){case"left":this.element.style.left="20px";break;case"right":this.element.style.left="auto",this.element.style.right="20px";break;case"top":this.element.style.top="20px";break;case"bottom":this.element.style.top="auto",this.element.style.bottom="20px"}}updatePosition(){const e=this.inspector.getConfig().position;switch(this.element.style.top="auto",this.element.style.right="auto",this.element.style.bottom="auto",this.element.style.left="auto",e){case"top-left":this.element.style.top="20px",this.element.style.left="20px";break;case"top-right":this.element.style.top="20px",this.element.style.right="20px";break;case"bottom-left":this.element.style.bottom="20px",this.element.style.left="20px";break;default:this.element.style.bottom="20px",this.element.style.right="20px"}}updateAppearance(){this.errorCount>0?(this.element.classList.add("has-errors"),this.element.innerHTML="âš ï¸",this.element.title=`DevInspector - ${this.errorCount} error${this.errorCount>1?"s":""} detected`):(this.element.classList.remove("has-errors"),this.element.innerHTML="ðŸ”",this.element.title="DevInspector - Click to toggle, drag to move")}show(){this.element.parentNode||document.body.appendChild(this.element),this.element.style.display="flex"}hide(){this.element.style.display="none"}destroy(){this.element.parentNode&&this.element.parentNode.removeChild(this.element)}getElement(){return this.element}}class z{constructor(e){this.tabs=new Map,this.activeTab=null,this.isDragging=!1,this.dragOffset={x:0,y:0},this.isResizing=!1,this.inspector=e,this.element=this.createElement(),this.setupEventListeners(),this.updatePosition()}createElement(){const e=document.createElement("div");e.className=`devinspector position-${this.inspector.getConfig().position}`,e.style.width="600px",e.style.height="400px",e.style.display="none",this.headerElement=document.createElement("div"),this.headerElement.className="devinspector-header",this.headerElement.innerHTML='\n      <h3 class="devinspector-title">DevInspector</h3>\n      <div class="devinspector-controls">\n        <button class="devinspector-control settings" title="Settings">âš™ï¸</button>\n        <button class="devinspector-control minimize" title="Minimize">âˆ’</button>\n        <button class="devinspector-control close" title="Close">Ã—</button>\n      </div>\n    ',this.tabsElement=document.createElement("div"),this.tabsElement.className="devinspector-tabs",this.bodyElement=document.createElement("div"),this.bodyElement.className="devinspector-body";const t=document.createElement("div");return t.className="devinspector-resizer",e.appendChild(this.headerElement),e.appendChild(this.tabsElement),e.appendChild(this.bodyElement),e.appendChild(t),e}setupEventListeners(){this.headerElement.querySelectorAll(".devinspector-control").forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();const n=e.className;n.includes("minimize")?this.inspector.minimize():n.includes("close")?this.inspector.hide():n.includes("settings")&&this.showSettings()})}),this.headerElement.addEventListener("mousedown",this.handleHeaderMouseDown.bind(this)),document.addEventListener("mousemove",this.handleMouseMove.bind(this)),document.addEventListener("mouseup",this.handleMouseUp.bind(this)),this.element.querySelector(".devinspector-resizer").addEventListener("mousedown",this.handleResizerMouseDown.bind(this)),this.tabsElement.addEventListener("click",e=>{const t=e.target.closest(".devinspector-tab");if(t){const e=t.dataset.tabId;e&&this.setActiveTab(e)}}),setInterval(()=>this.updateBadges(),1e3)}handleHeaderMouseDown(e){if(e.target.closest(".devinspector-control"))return;e.preventDefault(),this.isDragging=!0;const t=this.element.getBoundingClientRect();this.dragOffset={x:e.clientX-t.left,y:e.clientY-t.top},this.headerElement.style.cursor="grabbing",this.element.style.zIndex="1000000"}handleResizerMouseDown(e){e.preventDefault(),e.stopPropagation(),this.isResizing=!0,this.element.style.zIndex="1000000",document.body.style.cursor="nw-resize"}handleMouseMove(e){if(this.isDragging){e.preventDefault();const t=e.clientY-this.dragOffset.y,n=window.innerWidth-this.element.offsetWidth,s=window.innerHeight-this.element.offsetHeight,r=Math.max(0,Math.min(e.clientX-this.dragOffset.x,n)),i=Math.max(0,Math.min(t,s));this.element.style.left=`${r}px`,this.element.style.top=`${i}px`,this.element.style.right="auto",this.element.style.bottom="auto"}else if(this.isResizing){e.preventDefault();const t=this.element.getBoundingClientRect(),n=e.clientY-t.top,s=200,r=window.innerWidth-t.left,i=window.innerHeight-t.top,o=Math.max(300,Math.min(e.clientX-t.left,r)),a=Math.max(s,Math.min(n,i));this.element.style.width=`${o}px`,this.element.style.height=`${a}px`}}handleMouseUp(){this.isDragging&&(this.isDragging=!1,this.headerElement.style.cursor="move",this.element.style.zIndex="999999"),this.isResizing&&(this.isResizing=!1,this.element.style.zIndex="999999",document.body.style.cursor="auto")}updatePosition(){const e=this.inspector.getConfig().position;this.element.classList.remove("position-top-left","position-top-right","position-bottom-left","position-bottom-right"),this.element.classList.add(`position-${e}`)}showSettings(){console.log("Settings not implemented yet")}addTab(e){this.tabs.set(e.id,e);const t=document.createElement("button");t.className="devinspector-tab",t.dataset.tabId=e.id,t.innerHTML=`\n      ${e.label}\n      ${e.badge?'<span class="devinspector-tab-badge">0</span>':""}\n    `,this.tabsElement.appendChild(t);const n=document.createElement("div");n.className="devinspector-panel",n.dataset.panelId=e.id,n.appendChild(e.content),this.bodyElement.appendChild(n),1===this.tabs.size&&this.setActiveTab(e.id),this.updateBadges()}removeTab(e){if(!this.tabs.has(e))return;this.tabs.delete(e);const t=this.tabsElement.querySelector(`[data-tab-id="${e}"]`);t&&t.remove();const n=this.bodyElement.querySelector(`[data-panel-id="${e}"]`);if(n&&n.remove(),this.activeTab===e){const e=this.tabs.keys().next().value;e?this.setActiveTab(e):this.activeTab=null}}setActiveTab(e){this.tabs.has(e)&&(this.activeTab=e,this.tabsElement.querySelectorAll(".devinspector-tab").forEach(t=>{t.classList.toggle("active",t.dataset.tabId===e)}),this.bodyElement.querySelectorAll(".devinspector-panel").forEach(t=>{t.classList.toggle("active",t.dataset.panelId===e)}))}updateBadges(){this.tabs.forEach((e,t)=>{if(e.badge){const n=e.badge(),s=this.tabsElement.querySelector(`[data-tab-id="${t}"]`),r=null==s?void 0:s.querySelector(".devinspector-tab-badge");r&&(r.textContent=n.toString(),r.style.display=n>0?"inline-block":"none")}})}show(){this.element.parentNode||document.body.appendChild(this.element),this.element.style.display="flex",this.element.classList.remove("minimized")}hide(){this.element.style.display="none"}minimize(){this.element.classList.add("minimized")}destroy(){this.element.parentNode&&this.element.parentNode.removeChild(this.element)}getElement(){return this.element}getActiveTab(){return this.activeTab}}var L=Object.freeze({__proto__:null,DevInspectorUI:class{constructor(e){this.styleElement=null,this.isVisible=!1,this.isMinimized=!1,this.inspector=e,this.floatingWidget=new M(e),this.mainPanel=new z(e)}async init(){this.injectStyles(),this.setupTabs(),this.setupEventListeners(),this.floatingWidget.show()}injectStyles(){this.styleElement=document.createElement("style");const e=this.inspector.getConfig().theme,t="auto"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;this.styleElement.textContent=((e="dark")=>{const t="dark"===e?{primary:"#1e1e1e",secondary:"#2d2d30",tertiary:"#3e3e42",accent:"#007acc",text:"#cccccc",textSecondary:"#9d9d9d",border:"#3e3e42",success:"#4caf50",warning:"#ff9800",error:"#f44336",info:"#2196f3"}:{primary:"#ffffff",secondary:"#f5f5f5",tertiary:"#e0e0e0",accent:"#1976d2",text:"#333333",textSecondary:"#666666",border:"#ddd",success:"#4caf50",warning:"#ff9800",error:"#f44336",info:"#2196f3"};return`\n    .devinspector {\n      position: fixed;\n      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n      font-size: 12px;\n      line-height: 1.4;\n      color: ${t.text};\n      background: ${t.primary};\n      border: 1px solid ${t.border};\n      border-radius: 8px;\n      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n      z-index: 999999;\n      min-width: 300px;\n      min-height: 200px;\n      resize: both;\n      overflow: hidden;\n      backdrop-filter: blur(10px);\n      transition: all 0.3s ease;\n    }\n\n    .devinspector.fullwidth {\n      width: calc(100vw - 40px) !important;\n      left: 20px !important;\n      right: 20px !important;\n    }\n\n    .devinspector.bottom-sidebar {\n      bottom: 0 !important;\n      left: 0 !important;\n      right: 0 !important;\n      top: auto !important;\n      width: 100vw !important;\n      height: 40vh !important;\n      border-radius: 0 !important;\n      border-left: none !important;\n      border-right: none !important;\n      border-bottom: none !important;\n      resize: vertical;\n    }\n\n    .devinspector.bottom-sidebar .devinspector-header {\n      border-radius: 0;\n    }\n\n    .devinspector * {\n      box-sizing: border-box;\n    }\n\n    .devinspector.position-top-left {\n      top: 20px;\n      left: 20px;\n    }\n\n    .devinspector.position-top-right {\n      top: 20px;\n      right: 20px;\n    }\n\n    .devinspector.position-bottom-left {\n      bottom: 20px;\n      left: 20px;\n    }\n\n    .devinspector.position-bottom-right {\n      bottom: 20px;\n      right: 20px;\n    }\n\n    .devinspector.position-bottom-sidebar {\n      bottom: 0;\n      left: 0;\n      right: 0;\n      width: 100vw;\n      height: 40vh;\n      border-radius: 0;\n      border-left: none;\n      border-right: none;\n      border-bottom: none;\n    }\n\n    .devinspector.minimized {\n      width: 50px !important;\n      height: 50px !important;\n      overflow: hidden;\n      border-radius: 50%;\n      cursor: pointer;\n    }\n\n    .devinspector.minimized .devinspector-header {\n      height: 100%;\n      border-radius: 50%;\n      justify-content: center;\n      align-items: center;\n    }\n\n    .devinspector.minimized .devinspector-body,\n    .devinspector.minimized .devinspector-tabs,\n    .devinspector.minimized .devinspector-title {\n      display: none !important;\n    }\n\n    .devinspector-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 8px 12px;\n      background: ${t.secondary};\n      border-bottom: 1px solid ${t.border};\n      cursor: move;\n      user-select: none;\n      border-radius: 8px 8px 0 0;\n    }\n\n    .devinspector-title {\n      font-weight: 600;\n      color: ${t.text};\n      margin: 0;\n      font-size: 13px;\n    }\n\n    .devinspector-controls {\n      display: flex;\n      gap: 4px;\n    }\n\n    .devinspector-control {\n      width: 18px;\n      height: 18px;\n      border: none;\n      border-radius: 3px;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 12px;\n      font-weight: bold;\n      transition: all 0.2s ease;\n    }\n\n    .devinspector-control:hover {\n      opacity: 0.8;\n      transform: scale(1.1);\n    }\n\n    .devinspector-control.minimize {\n      background: ${t.warning};\n      color: white;\n    }\n\n    .devinspector-control.close {\n      background: ${t.error};\n      color: white;\n    }\n\n    .devinspector-control.settings {\n      background: ${t.tertiary};\n      color: ${t.text};\n    }\n\n    .devinspector-tabs {\n      display: flex;\n      background: ${t.secondary};\n      border-bottom: 1px solid ${t.border};\n      overflow-x: auto;\n    }\n\n    .devinspector-tab {\n      padding: 8px 16px;\n      background: none;\n      border: none;\n      color: ${t.textSecondary};\n      cursor: pointer;\n      font-family: inherit;\n      font-size: 11px;\n      font-weight: 500;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n      border-bottom: 2px solid transparent;\n      transition: all 0.2s ease;\n      white-space: nowrap;\n    }\n\n    .devinspector-tab:hover {\n      color: ${t.text};\n      background: ${t.tertiary};\n    }\n\n    .devinspector-tab.active {\n      color: ${t.accent};\n      border-bottom-color: ${t.accent};\n      background: ${t.primary};\n    }\n\n    .devinspector-tab-badge {\n      display: inline-block;\n      background: ${t.error};\n      color: white;\n      border-radius: 10px;\n      padding: 1px 6px;\n      font-size: 10px;\n      margin-left: 6px;\n      min-width: 16px;\n      text-align: center;\n    }\n\n    .devinspector-body {\n      flex: 1;\n      overflow: hidden;\n      display: flex;\n      flex-direction: column;\n    }\n\n    .devinspector-panel {\n      flex: 1;\n      display: none;\n      flex-direction: column;\n      overflow: hidden;\n    }\n\n    .devinspector-panel.active {\n      display: flex;\n    }\n\n    .devinspector-toolbar {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 12px;\n      background: ${t.secondary};\n      border-bottom: 1px solid ${t.border};\n      flex-wrap: wrap;\n    }\n\n    .devinspector-search {\n      flex: 1;\n      min-width: 200px;\n      padding: 4px 8px;\n      border: 1px solid ${t.border};\n      border-radius: 4px;\n      background: ${t.primary};\n      color: ${t.text};\n      font-family: inherit;\n      font-size: 11px;\n    }\n\n    .devinspector-search::placeholder {\n      color: ${t.textSecondary};\n    }\n\n    .devinspector-button {\n      padding: 4px 8px;\n      border: 1px solid ${t.border};\n      border-radius: 4px;\n      background: ${t.tertiary};\n      color: ${t.text};\n      cursor: pointer;\n      font-family: inherit;\n      font-size: 11px;\n      transition: all 0.2s ease;\n    }\n\n    .devinspector-button:hover {\n      background: ${t.accent};\n      color: white;\n    }\n\n    .devinspector-button.active {\n      background: ${t.accent};\n      color: white;\n    }\n\n    .devinspector-content {\n      flex: 1;\n      overflow: auto;\n      padding: 8px;\n    }\n\n    .devinspector-list {\n      list-style: none;\n      margin: 0;\n      padding: 0;\n    }\n\n    .devinspector-list-item {\n      padding: 8px 12px;\n      border-bottom: 1px solid ${t.border};\n      cursor: pointer;\n      transition: background 0.2s ease;\n    }\n\n    .devinspector-list-item:hover {\n      background: ${t.secondary};\n    }\n\n    .devinspector-list-item.selected {\n      background: ${t.accent};\n      color: white;\n    }\n\n    .devinspector-timestamp {\n      color: ${t.textSecondary};\n      font-size: 10px;\n    }\n\n    .devinspector-status {\n      display: inline-block;\n      padding: 2px 6px;\n      border-radius: 3px;\n      font-size: 10px;\n      font-weight: bold;\n      text-transform: uppercase;\n    }\n\n    .devinspector-status.success {\n      background: ${t.success};\n      color: white;\n    }\n\n    .devinspector-status.error {\n      background: ${t.error};\n      color: white;\n    }\n\n    .devinspector-status.warning {\n      background: ${t.warning};\n      color: white;\n    }\n\n    .devinspector-status.info {\n      background: ${t.info};\n      color: white;\n    }\n\n    .devinspector-json {\n      font-family: 'Monaco', 'Menlo', monospace;\n      font-size: 11px;\n      line-height: 1.4;\n      white-space: pre-wrap;\n      word-break: break-word;\n    }\n\n    .devinspector-json .json-key {\n      color: ${"dark"===e?"#9cdcfe":"#0451a5"};\n    }\n\n    .devinspector-json .json-string {\n      color: ${"dark"===e?"#ce9178":"#a31515"};\n    }\n\n    .devinspector-json .json-number {\n      color: ${"dark"===e?"#b5cea8":"#09885a"};\n    }\n\n    .devinspector-json .json-boolean {\n      color: ${"dark"===e?"#569cd6":"#0000ff"};\n    }\n\n    .devinspector-json .json-null {\n      color: ${"dark"===e?"#569cd6":"#0000ff"};\n    }\n\n    .devinspector-console-entry {\n      display: flex;\n      align-items: flex-start;\n      gap: 8px;\n      padding: 4px 8px;\n      border-bottom: 1px solid ${t.border};\n      font-family: 'Monaco', 'Menlo', monospace;\n      font-size: 11px;\n      line-height: 1.4;\n    }\n\n    .devinspector-console-entry.log {\n      color: ${t.text};\n    }\n\n    .devinspector-console-entry.info {\n      color: ${t.info};\n    }\n\n    .devinspector-console-entry.warn {\n      color: ${t.warning};\n    }\n\n    .devinspector-console-entry.error {\n      color: ${t.error};\n    }\n\n    .devinspector-console-entry.debug {\n      color: ${t.textSecondary};\n    }\n\n    .devinspector-console-level {\n      font-weight: bold;\n      text-transform: uppercase;\n      font-size: 10px;\n      min-width: 40px;\n    }\n\n    .devinspector-chart {\n      height: 100px;\n      background: ${t.secondary};\n      border: 1px solid ${t.border};\n      border-radius: 4px;\n      margin: 8px 0;\n      position: relative;\n    }\n\n    .devinspector-metric {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 8px;\n      background: ${t.secondary};\n      border: 1px solid ${t.border};\n      border-radius: 4px;\n      margin: 4px 0;\n    }\n\n    .devinspector-metric-label {\n      font-weight: 500;\n      color: ${t.text};\n    }\n\n    .devinspector-metric-value {\n      font-weight: bold;\n      color: ${t.accent};\n    }\n\n    .devinspector-error-group {\n      border-left: 4px solid ${t.error};\n      padding-left: 8px;\n      margin: 8px 0;\n    }\n\n    .devinspector-error-message {\n      font-weight: bold;\n      color: ${t.error};\n      margin-bottom: 4px;\n    }\n\n    .devinspector-error-stack {\n      font-family: 'Monaco', 'Menlo', monospace;\n      font-size: 10px;\n      color: ${t.textSecondary};\n      background: ${t.secondary};\n      padding: 8px;\n      border-radius: 4px;\n      overflow-x: auto;\n      white-space: pre;\n    }\n\n    .devinspector-resizer {\n      position: absolute;\n      bottom: 0;\n      right: 0;\n      width: 16px;\n      height: 16px;\n      cursor: nw-resize;\n      background: linear-gradient(\n        -45deg,\n        transparent 0%,\n        transparent 40%,\n        ${t.border} 40%,\n        ${t.border} 60%,\n        transparent 60%,\n        transparent 100%\n      );\n    }\n\n    .devinspector-floating-widget {\n      position: fixed;\n      width: 60px;\n      height: 60px;\n      background: ${t.accent};\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);\n      z-index: 999998;\n      transition: all 0.3s ease;\n      color: white;\n      font-weight: bold;\n      font-size: 14px;\n    }\n\n    .devinspector-floating-widget:hover {\n      transform: scale(1.1);\n      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);\n    }\n\n    .devinspector-floating-widget.has-errors {\n      background: ${t.error};\n      animation: pulse 2s infinite;\n    }\n\n    @keyframes pulse {\n      0% { opacity: 1; }\n      50% { opacity: 0.7; }\n      100% { opacity: 1; }\n    }\n\n    /* Scrollbar styles */\n    .devinspector *::-webkit-scrollbar {\n      width: 8px;\n      height: 8px;\n    }\n\n    .devinspector *::-webkit-scrollbar-track {\n      background: ${t.secondary};\n    }\n\n    .devinspector *::-webkit-scrollbar-thumb {\n      background: ${t.tertiary};\n      border-radius: 4px;\n    }\n\n    .devinspector *::-webkit-scrollbar-thumb:hover {\n      background: ${t.accent};\n    }\n  `})(t),document.head.appendChild(this.styleElement)}setupTabs(){const e={id:"network",label:"Network",badge:()=>this.inspector.getStorage("network").getSize(),content:this.createNetworkPanel()},t={id:"console",label:"Console",badge:()=>this.inspector.getStorage("console").getSize(),content:this.createConsolePanel()},n={id:"performance",label:"Performance",content:this.createPerformancePanel()},s={id:"errors",label:"Errors",badge:()=>this.inspector.getStorage("error").getSize(),content:this.createErrorsPanel()};this.mainPanel.addTab(e),this.mainPanel.addTab(t),this.mainPanel.addTab(n),this.mainPanel.addTab(s)}createNetworkPanel(){const e=document.createElement("div");return e.innerHTML='\n      <div class="devinspector-toolbar">\n        <input type="text" class="devinspector-search" placeholder="Filter requests...">\n        <button class="devinspector-button">Clear</button>\n        <button class="devinspector-button">Export</button>\n      </div>\n      <div class="devinspector-content">\n        <div class="devinspector-network-list">\n          <p style="text-align: center; color: #666; margin-top: 40px;">\n            Network requests will appear here...\n          </p>\n        </div>\n      </div>\n    ',this.inspector.on("network:request",t=>{this.addNetworkEntry(e,t)}),this.inspector.on("network:response",t=>{this.updateNetworkEntry(e,t)}),e}createConsolePanel(){const e=document.createElement("div");return e.innerHTML='\n      <div class="devinspector-toolbar">\n        <input type="text" class="devinspector-search" placeholder="Filter logs...">\n        <button class="devinspector-button">Clear</button>\n        <button class="devinspector-button">Export</button>\n      </div>\n      <div class="devinspector-content">\n        <div class="devinspector-console-list">\n          <p style="text-align: center; color: #666; margin-top: 40px;">\n            Console logs will appear here...\n          </p>\n        </div>\n      </div>\n    ',this.inspector.on("console:log",t=>{this.addConsoleEntry(e,t)}),e}createPerformancePanel(){const e=document.createElement("div");return e.innerHTML='\n      <div class="devinspector-content">\n        <div class="devinspector-metrics">\n          <div class="devinspector-metric">\n            <span class="devinspector-metric-label">FPS</span>\n            <span class="devinspector-metric-value" id="fps-value">--</span>\n          </div>\n          <div class="devinspector-metric">\n            <span class="devinspector-metric-label">Memory</span>\n            <span class="devinspector-metric-value" id="memory-value">--</span>\n          </div>\n          <div class="devinspector-chart" id="fps-chart"></div>\n          <div class="devinspector-chart" id="memory-chart"></div>\n        </div>\n      </div>\n    ',this.inspector.on("performance:data",t=>{this.updatePerformanceMetrics(e,t)}),e}createErrorsPanel(){const e=document.createElement("div");return e.innerHTML='\n      <div class="devinspector-toolbar">\n        <button class="devinspector-button">Clear All</button>\n        <button class="devinspector-button">Export</button>\n      </div>\n      <div class="devinspector-content">\n        <div class="devinspector-errors-list">\n          <p style="text-align: center; color: #666; margin-top: 40px;">\n            No errors detected\n          </p>\n        </div>\n      </div>\n    ',this.inspector.on("error:caught",t=>{this.addErrorEntry(e,t)}),this.inspector.on("error:uncaught",t=>{this.addErrorEntry(e,t)}),e}setupEventListeners(){this.inspector.on("console:clear",()=>{const e=document.querySelector(".devinspector-console-list");e&&(e.innerHTML='\n          <p style="text-align: center; color: #666; margin-top: 40px;">\n            Console cleared\n          </p>\n        ')})}addNetworkEntry(e,t){const n=e.querySelector(".devinspector-network-list");if(!n)return;const s=n.querySelector("p");s&&s.remove();const r=document.createElement("div");r.className="devinspector-list-item",r.dataset.requestId=t.id,r.innerHTML=`\n      <div style="display: flex; justify-content: space-between; align-items: center;">\n        <span>${t.method} ${t.url}</span>\n        <span class="devinspector-status info">Pending</span>\n      </div>\n      <div class="devinspector-timestamp">${new Date(t.timestamp).toLocaleTimeString()}</div>\n    `,n.appendChild(r)}updateNetworkEntry(e,t){const n=e.querySelector(`[data-request-id="${t.id}"]`);if(!n)return;const s=n.querySelector(".devinspector-status");s&&(s.textContent=`${t.status}`,s.className="devinspector-status "+(t.status>=400?"error":"success"))}addConsoleEntry(e,t){const n=e.querySelector(".devinspector-console-list");if(!n)return;const s=n.querySelector("p");s&&s.remove();const r=document.createElement("div");r.className=`devinspector-console-entry ${t.level}`,r.innerHTML=`\n      <span class="devinspector-console-level">${t.level}</span>\n      <span class="devinspector-console-content">${this.formatConsoleArgs(t.formattedArgs)}</span>\n      <span class="devinspector-timestamp">${new Date(t.timestamp).toLocaleTimeString()}</span>\n    `,n.appendChild(r),n.scrollTop=n.scrollHeight}addErrorEntry(e,t){const n=e.querySelector(".devinspector-errors-list");if(!n)return;const s=n.querySelector("p");s&&s.remove();const r=document.createElement("div");r.className="devinspector-error-group",r.innerHTML=`\n      <div class="devinspector-error-message">${t.message}</div>\n      <div class="devinspector-timestamp">${new Date(t.timestamp).toLocaleTimeString()}</div>\n      ${t.stack?`<pre class="devinspector-error-stack">${t.stack.join("\n")}</pre>`:""}\n    `,n.appendChild(r)}updatePerformanceMetrics(e,t){const n=e.querySelector("#fps-value"),s=e.querySelector("#memory-value");if(n&&t.fps&&(n.textContent=`${t.fps.fps} FPS`),s&&t.memory){const e=Math.round(t.memory.usedJSHeapSize/1024/1024);s.textContent=`${e} MB`}}formatConsoleArgs(e){return e.map(e=>"string"==typeof e?e:e&&"object"==typeof e?JSON.stringify(e,null,2):String(e)).join(" ")}show(){this.mainPanel.show(),this.isVisible=!0,this.isMinimized=!1}hide(){this.mainPanel.hide(),this.isVisible=!1}minimize(){this.mainPanel.minimize(),this.isMinimized=!0}destroy(){this.floatingWidget.destroy(),this.mainPanel.destroy(),this.styleElement&&this.styleElement.parentNode&&this.styleElement.parentNode.removeChild(this.styleElement)}getElement(){return this.mainPanel.getElement()}}});e.BasePlugin=class{async install(e){this.context=e,await this.onInstall()}async uninstall(){await this.onUninstall(),this.context=void 0}enable(){this.onEnable()}disable(){this.onDisable()}onUninstall(){}onEnable(){}onDisable(){}get inspector(){var e;return null===(e=this.context)||void 0===e?void 0:e.inspector}get events(){var e;if(!(null===(e=this.context)||void 0===e?void 0:e.events))throw new Error("Events not available - plugin not installed");return this.context.events}get storage(){var e;return null===(e=this.context)||void 0===e?void 0:e.storage}get config(){var e;return null===(e=this.context)||void 0===e?void 0:e.config}},e.CircularStorage=s,e.DevInspector=t,e.EnhancedDevInspector=t,e.EventEmitter=n,e.IndexedStorage=r,e.OriginalDevInspector=o,e.SimpleDevInspector=class{constructor(e={}){this.widget=null,this.panel=null,this.isVisible=!1,this.config={enabled:!0,position:"bottom-right",theme:"dark",...e},this.config.enabled&&this.init()}init(){this.createWidget(),this.createPanel(),this.setupEventListeners()}createWidget(){this.widget=document.createElement("div"),this.widget.style.cssText=`\n      position: fixed;\n      ${"bottom-right"===this.config.position?"bottom: 20px; right: 20px;":""}\n      ${"bottom-left"===this.config.position?"bottom: 20px; left: 20px;":""}\n      ${"top-right"===this.config.position?"top: 20px; right: 20px;":""}\n      ${"top-left"===this.config.position?"top: 20px; left: 20px;":""}\n      width: 60px;\n      height: 60px;\n      background: #007acc;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      z-index: 999999;\n      font-size: 24px;\n      box-shadow: 0 4px 16px rgba(0,0,0,0.3);\n      transition: transform 0.3s ease;\n      color: white;\n    `,this.widget.innerHTML="ðŸ”",this.widget.title="DevInspector - Click to toggle",document.body.appendChild(this.widget)}createPanel(){var e,t;this.panel=document.createElement("div");const n="dark"===this.config.theme?"#1e1e1e":"#ffffff",s="dark"===this.config.theme?"#cccccc":"#333333",r="dark"===this.config.theme?"#3e3e42":"#ddd";this.panel.style.cssText=`\n      position: fixed;\n      ${(null===(e=this.config.position)||void 0===e?void 0:e.includes("bottom"))?"bottom: 100px;":"top: 100px;"}\n      ${(null===(t=this.config.position)||void 0===t?void 0:t.includes("right"))?"right: 20px;":"left: 20px;"}\n      width: 500px;\n      height: 400px;\n      background: ${n};\n      border: 1px solid ${r};\n      border-radius: 8px;\n      color: ${s};\n      font-family: Monaco, monospace;\n      font-size: 12px;\n      display: none;\n      flex-direction: column;\n      z-index: 999998;\n      box-shadow: 0 8px 32px rgba(0,0,0,0.5);\n    `,this.panel.innerHTML=`\n      <div style="padding: 10px; background: ${"dark"===this.config.theme?"#2d2d30":"#f5f5f5"}; border-bottom: 1px solid ${r}; display: flex; justify-content: space-between; align-items: center;">\n        <span style="font-weight: bold;">DevInspector v1.0.0</span>\n        <button onclick="this.closest('.devinspector-panel').style.display='none'" style="background: #f44336; border: none; color: white; width: 20px; height: 20px; border-radius: 3px; cursor: pointer;">Ã—</button>\n      </div>\n      <div style="display: flex; background: ${"dark"===this.config.theme?"#2d2d30":"#f5f5f5"}; border-bottom: 1px solid ${r};">\n        <button style="padding: 8px 16px; background: #007acc; border: none; color: white; cursor: pointer;">Network</button>\n        <button style="padding: 8px 16px; background: none; border: none; color: ${s}; cursor: pointer;">Console</button>\n        <button style="padding: 8px 16px; background: none; border: none; color: ${s}; cursor: pointer;">Performance</button>\n        <button style="padding: 8px 16px; background: none; border: none; color: ${s}; cursor: pointer;">Errors</button>\n      </div>\n      <div style="flex: 1; padding: 15px; overflow: auto;">\n        <div style="text-align: center; margin-top: 50px; color: #666;">\n          <h3 style="color: #007acc; margin-bottom: 20px;">ðŸŽ‰ DevInspector v1.0.0 - Production Ready!</h3>\n          <p>Welcome to the professional developer debugging tool!</p>\n          <br>\n          <div style="text-align: left; max-width: 400px; margin: 0 auto;">\n            <h4 style="color: #007acc;">âœ… Features Implemented:</h4>\n            <ul style="list-style: none; padding: 0;">\n              <li>ðŸŒ Network monitoring (fetch, XHR, WebSocket)</li>\n              <li>ðŸ“ Console enhancement with filtering</li>\n              <li>âš¡ Performance monitoring (FPS, memory, metrics)</li>\n              <li>ðŸ› Error tracking with grouping</li>\n              <li>ðŸŽ¨ Professional UI with themes</li>\n              <li>ðŸ”Œ Plugin architecture</li>\n              <li>ðŸ“¦ Zero dependencies</li>\n              <li>ðŸš€ Production ready builds</li>\n            </ul>\n            <br>\n            <p style="font-size: 11px; opacity: 0.8;">\n              This is the production-ready DevInspector tool!<br>\n              Framework-agnostic â€¢ TypeScript â€¢ Zero dependencies\n            </p>\n          </div>\n        </div>\n      </div>\n    `,this.panel.className="devinspector-panel",document.body.appendChild(this.panel)}setupEventListeners(){this.widget&&this.widget.addEventListener("click",()=>this.toggle()),document.addEventListener("keydown",e=>{e.ctrlKey&&e.shiftKey&&"D"===e.key&&(e.preventDefault(),this.toggle())})}show(){this.panel&&(this.panel.style.display="flex",this.isVisible=!0)}hide(){this.panel&&(this.panel.style.display="none",this.isVisible=!1)}toggle(){this.isVisible?this.hide():this.show()}destroy(){this.widget&&this.widget.parentNode&&this.widget.parentNode.removeChild(this.widget),this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel)}track(e,t){console.log(`[DevInspector] Tracking: ${e}`,t)}markStart(e){performance.mark(`devinspector-${e}-start`)}markEnd(e){performance.mark(`devinspector-${e}-end`);try{performance.measure(`devinspector-${e}`,`devinspector-${e}-start`,`devinspector-${e}-end`)}catch(t){console.warn(`Failed to measure ${e}:`,t)}}},e.default=t,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=devinspector.umd.min.js.map
